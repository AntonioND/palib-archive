<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>PAlib:  Fichier source de PA_Palette.h</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Généré par Doxygen 1.3.9.1 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="index.html">Page&nbsp;principale</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="files.html">Liste&nbsp;des&nbsp;fichiers</a> | <a class="qindex" href="globals.html">Portée&nbsp;globale</a>  | <span class="search">Rechercher&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<h1>PA_Palette.h</h1><a href="_p_a___palette_8h.html">Aller à la documentation de ce fichier.</a><div class="fragment"><pre class="fragment">00001 <span class="preprocessor">#ifndef _PA_Palette</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define _PA_Palette</span>
00003 <span class="preprocessor"></span>
00004 
00005 
00006 <span class="keywordtype">void</span> PA_LoadSpriteExtPal(u8 screen, u16 palette_number, <span class="keywordtype">void</span>* palette);
00007 <span class="preprocessor">#define PA_LoadBgExtPal(screen, bg_number, palette) PA_LoadBgPal(screen, bg_number, palette)</span>
00008 <span class="preprocessor"></span>
00009 
00010 
00017 <span class="comment">//#include "../PA.h"</span>
00018 
00019 
00021 <span class="comment">// Système pour les palettes</span>
00023 <span class="comment"></span><span class="preprocessor">#define PAL_BG0 0x05000000 </span>
00024 <span class="preprocessor"></span><span class="preprocessor">#define PAL_SPRITE0 0x05000200 </span>
00025 <span class="preprocessor"></span><span class="preprocessor">#define PAL_BG1 0x05000400 </span>
00026 <span class="preprocessor"></span><span class="preprocessor">#define PAL_SPRITE1 0x05000600 </span>
00027 <span class="preprocessor"></span>
00028 <span class="preprocessor">#define REG_BRIGHT 0x0400006C  // Brightness</span>
00029 <span class="preprocessor"></span>
00030 
00031 
<a name="l00049"></a><a class="code" href="group___palette.html#ga14">00049</a> <span class="preprocessor">#define PA_LoadPal(palette, source) {\</span>
00050 <span class="preprocessor">       DMA_Copy((void*)source, (void*)palette, 256, DMA_16NOW);\</span>
00051 <span class="preprocessor">       if (palette == PAL_SPRITE0) PA_LoadSpritePal(0, 0, (void*)source);\</span>
00052 <span class="preprocessor">       if (palette == PAL_SPRITE1) PA_LoadSpritePal(1, 0, (void*)source);\</span>
00053 <span class="preprocessor">       if (palette == PAL_BG0) {u8 itemp; for (itemp = 0; itemp &lt; 4; itemp++) PA_LoadBgPal(0, itemp, (void*)(source));}\</span>
00054 <span class="preprocessor">       if (palette == PAL_BG1) {u8 itemp; for (itemp = 0; itemp &lt; 4; itemp++) PA_LoadBgPal(1, itemp, (void*)(source));}}</span>
00055 <span class="preprocessor"></span>
00056 
<a name="l00068"></a><a class="code" href="group___palette.html#ga0">00068</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___palette.html#ga0">PA_Load8bitBgPal</a>(u8 screen, <span class="keywordtype">void</span> *Pal){
00069 u32 dest = PAL_BG0 + (screen&lt;&lt;10);
00070        DMA_Copy((<span class="keywordtype">void</span>*)Pal, (<span class="keywordtype">void</span>*)dest, 256, DMA_16NOW);\
00071 } 
00072 
00073 
<a name="l00089"></a><a class="code" href="group___palette.html#ga15">00089</a> <span class="preprocessor">#define PA_LoadPal16(palette, n_palette, source)   DMA_Copy((void*)source, (void*)(palette + (n_palette &lt;&lt; 5)), 16, DMA_16NOW)</span>
00090 <span class="preprocessor"></span>
<a name="l00106"></a><a class="code" href="group___palette.html#ga16">00106</a> <span class="preprocessor">#define PA_LoadSprite16cPal(screen, n_palette, palette) PA_LoadPal16((PAL_SPRITE0+(0x400*screen)), (n_palette), palette)</span>
00107 <span class="preprocessor"></span>
00108 
<a name="l00124"></a><a class="code" href="group___palette.html#ga17">00124</a> <span class="preprocessor">#define PA_RGB(r,g,b) ((1 &lt;&lt; 15) + (r) + ((g)&lt;&lt;5) + ((b)&lt;&lt;10))</span>
00125 <span class="preprocessor"></span>
00139 <span class="keywordtype">void</span> <a class="code" href="group___palette.html#ga1">PA_SetBrightness</a>(u8 screen, s8 bright);
00140 
00141 
00142 
<a name="l00151"></a><a class="code" href="group___palette.html#ga2">00151</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___palette.html#ga2">PA_SetPalNeg</a>(u32 palette) {
00152        u16* pal = (u16*)palette;
00153        u16 i;
00154        
00155        <span class="keywordflow">for</span> (i = 0; i &lt; 256; i++) pal[i] = ~pal[i]; <span class="comment">// On fout le négatif...</span>
00156 }
00157 
00158 
00159 
00160 
<a name="l00172"></a><a class="code" href="group___palette.html#ga3">00172</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___palette.html#ga3">PA_SetPal16Neg</a>(u32 palette, u8 n_palette) {
00173 u16* pal = (u16*)palette;
00174 u16 i;
00175 
00176 <span class="keywordflow">for</span> (i = (n_palette &lt;&lt; 4); i &lt; ((n_palette + 1) &lt;&lt; 4); i++) pal[i] = ~pal[i]; <span class="comment">// On fout le négatif...</span>
00177 }
00178 
00179 
00185 <span class="keywordtype">void</span> <a class="code" href="group___palette.html#ga4">PA_InitSpriteExtPal</a>(<span class="keywordtype">void</span>);
00186 
00187 
00188 
00194 <span class="keywordtype">void</span> <a class="code" href="group___palette.html#ga5">PA_InitBgExtPal</a>(<span class="keywordtype">void</span>);
00195 
00196 
00197 
<a name="l00212"></a><a class="code" href="group___palette.html#ga6">00212</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___palette.html#ga6">PA_LoadSpritePal</a>(u8 screen, u8 palette_number, <span class="keywordtype">void</span>* palette)
00213 {
00214        PA_LoadSpriteExtPal(screen, palette_number, palette);
00215 }
00216 
00217 
00235 <span class="keywordtype">void</span> <a class="code" href="group___palette.html#ga7">PA_LoadBgPalN</a>(u8 screen, u8 bg_number, u8 pal_number, <span class="keywordtype">void</span>* palette);
00236 
00237 
<a name="l00252"></a><a class="code" href="group___palette.html#ga8">00252</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___palette.html#ga8">PA_LoadBgPal</a>(u8 screen, u16 bg_number, <span class="keywordtype">void</span>* palette){
00253        <a class="code" href="group___palette.html#ga7">PA_LoadBgPalN</a>(screen, bg_number, 0, palette);
00254 }
00255 
00273 <span class="keywordtype">void</span> <a class="code" href="group___palette.html#ga7">PA_LoadBgPalN</a>(u8 screen, u8 bg_number, u8 pal_number, <span class="keywordtype">void</span>* palette);
00274 
00275 
00276 
00277 
<a name="l00292"></a><a class="code" href="group___palette.html#ga18">00292</a> <span class="preprocessor">#define PA_SetBgPalCol(screen, color_number, colorRGB) BG_PALETTE[color_number + (screen &lt;&lt; 9)] = colorRGB</span>
00293 <span class="preprocessor"></span>
00294 
00295 
00316 <span class="keywordtype">void</span> <a class="code" href="group___palette.html#ga9">PA_SetBgPalNCol</a>(u8 screen, u8 bg_number, u8 pal_number, u8 color_number, u16 color);
00317 
00318 
00319 
00320 
00321 
<a name="l00333"></a><a class="code" href="group___palette.html#ga10">00333</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___palette.html#ga10">PA_SetBgColor</a>(u8 screen, u16 color){
00334        BG_PALETTE[screen&lt;&lt;9] = color;
00335 } 
00336 
00337 
00355 <span class="keywordtype">void</span> <a class="code" href="group___palette.html#ga11">PA_SetSpritePalCol</a>(u8 screen, u8 pal_number, u8 color_number, u16 color);
00356 
00357 
00358 
00359 
00360 <span class="preprocessor">#define PA_AdjustCol(color, bright) color+= bright; if (color &lt; 0) color = 0; if (color &gt; 31) color = 31</span>
00361 <span class="preprocessor"></span>
00362 <span class="keywordtype">void</span> PA_CreatePalBright(u16 *pal, u16 *newpal, s8 bright);
00363 
00364 <span class="keywordtype">void</span> PA_CreatePalTransition(u16 *pal, u16 *newpal, s8 level, u8 destr, u8 destg, u8 destb);
00365 
00366 
00367 
00368 
00369 
00370 
00371 
00372 
00373 
00374 
00375 
00376 
00377 
00378 
00379  <span class="comment">// end of Palette</span>
00382 <span class="comment"></span><span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span>* PA_GetBgPal(u8 screen, u8 bg_number){
00383        <span class="keywordflow">if</span> (screen == 0) <span class="keywordflow">return</span> (<span class="keywordtype">void</span>*)(VRAM_E + (bg_number &lt;&lt; 12));
00384        <span class="keywordflow">else</span> <span class="keywordflow">return</span> (<span class="keywordtype">void</span>*)(VRAM_H + (bg_number &lt;&lt; 12));
00385 }
00386 
00387 
00402 <span class="comment">/*#define PA_SetSpritePalCol(screen, color_number, colorRGB) BG_PALETTE[256 + color_number + (screen &lt;&lt; 9)] = colorRGB*/</span>
00403 
00404 
00405 
00406 
00407 <span class="preprocessor">#endif</span>
00408 <span class="preprocessor"></span>
00409 
</pre></div><hr size="1"><address style="align: right;"><small>Généré le Tue Jan 30 23:10:49 2007 pour PAlib par&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
