<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>PA_lib:  Fichier source de PA_Sound.h</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Généré par Doxygen 1.3.9.1 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="index.html">Page&nbsp;principale</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="files.html">Liste&nbsp;des&nbsp;fichiers</a> | <a class="qindex" href="globals.html">Portée&nbsp;globale</a>  | <span class="search">Rechercher&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<h1>PA_Sound.h</h1><a href="_p_a___sound_8h.html">Aller à la documentation de ce fichier.</a><div class="fragment"><pre class="fragment">00001 <span class="preprocessor">#ifndef _PA_Sound9</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define _PA_Sound9</span>
00003 <span class="preprocessor"></span>
00011 <span class="preprocessor">#include "../Sound9.h"</span>
00012 <span class="preprocessor">#include "<a class="code" href="_p_a___g_b_f_s_8h.html">PA_GBFS.h</a>"</span>
00013 <span class="preprocessor">#include &lt;<a class="code" href="_p_a9_8h.html">PA9.h</a>&gt;</span>
00014 
00015        <span class="comment">// 256KB to load MOD files into. Actual size necessary is the size </span>
00016        <span class="comment">// of your largest MOD file (probably less than 256KB).</span>
00017 <span class="preprocessor">#define SND_MEM_POOL_SIZE   256*1024</span>
00018 <span class="preprocessor"></span>
00019 
00020 
00021 <span class="keyword">extern</span> TransferSound snd;
00022 <span class="keyword">extern</span> u32 *sndMemPool;
00023 
00024 <span class="keyword">typedef</span> <span class="keyword">struct</span>{ <span class="comment">// Default sound format</span>
00025        u8 volume;
00026        s16 freq;
00027        s16 format;
00028 } PA_SoundOptions;
00029 
00030 <span class="keyword">extern</span> PA_SoundOptions PA_SoundOption;
00031 
00032 <span class="keyword">extern</span> u8 *GBFS_mod;
00033 <span class="keyword">extern</span> u8 *GBFS_wav[16]; <span class="comment">// 16 channels...</span>
00034 
00035 <span class="comment">//plays an 8 bit mono sample at 11025Hz</span>
00036 
00037 
00038 
00039 
00040 
00041 
00062 <span class="keywordtype">void</span> <a class="code" href="group___sound_a_r_m9.html#ga0">PA_SetDefaultSound</a>(u8 volume, s16 freq, s16 format);
00063 
00064 
<a name="l00070"></a><a class="code" href="group___sound_a_r_m9.html#ga1">00070</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sound_a_r_m9.html#ga1">PA_InitSound</a>(<span class="keywordtype">void</span>) {
00071        SndInit9 ();
00072        sndMemPool = (u32*)0x2200000;
00073        SndSetMemPool(sndMemPool, SND_MEM_POOL_SIZE);
00074        <a class="code" href="group___sound_a_r_m9.html#ga0">PA_SetDefaultSound</a>(127, 11025, 1);
00075        GBFS_mod = (u8*)malloc(2); <span class="comment">// Initialise a small portion of memory, will make it bigger later on...</span>
00076 }
00077 
00078 
00079 
00103 <span class="keywordtype">void</span> <a class="code" href="group___sound_a_r_m9.html#ga2">PA_PlaySoundEx</a>(u8 PA_Channel, <span class="keyword">const</span> <span class="keywordtype">void</span>* data, u32 length, u8 volume, s16 freq, s16 format);
00104 
<a name="l00125"></a><a class="code" href="group___sound_a_r_m9.html#ga3">00125</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sound_a_r_m9.html#ga3">PA_PlayGBFSSoundEx</a>(u8 PA_Channel, u16 GBFS_wav_number, u8 volume, s16 freq, s16 format){
00126 s32 length = (PA_GBFSfile[GBFS_wav_number].Length &gt;&gt; 2) + 1; <span class="comment">// Pour etre sur...</span>
00127        free(GBFS_wav[PA_Channel]);
00128        GBFS_wav[PA_Channel] = (u8*)malloc(length &lt;&lt; 2);
00129        
00130        DMA_Copy(PA_GBFSfile[GBFS_wav_number].File, GBFS_wav[PA_Channel], length, DMA_32NOW);
00131 
00132        <a class="code" href="group___sound_a_r_m9.html#ga2">PA_PlaySoundEx</a>(PA_Channel, (<span class="keywordtype">void</span>*)GBFS_wav[PA_Channel], length &lt;&lt; 2, volume, freq, format);
00133 }
00134 
<a name="l00155"></a><a class="code" href="group___sound_a_r_m9.html#ga4">00155</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sound_a_r_m9.html#ga4">PA_PlaySound</a>(u8 PA_Channel, <span class="keyword">const</span> <span class="keywordtype">void</span>* data, u32 length, u8 volume, s16 freq){
00156 <a class="code" href="group___sound_a_r_m9.html#ga2">PA_PlaySoundEx</a>(PA_Channel, data, length, volume, freq, 1);
00157 }
00158 
<a name="l00176"></a><a class="code" href="group___sound_a_r_m9.html#ga5">00176</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sound_a_r_m9.html#ga5">PA_PlayGBFSSound</a>(u8 PA_Channel, u16 GBFS_wav_number, u8 volume, s16 freq){
00177 s32 length = (PA_GBFSfile[GBFS_wav_number].Length &gt;&gt; 2) + 1; <span class="comment">// Pour etre sur...</span>
00178        free(GBFS_wav[PA_Channel]);
00179        GBFS_wav[PA_Channel] = (u8*)malloc(length &lt;&lt; 2);
00180        
00181        DMA_Copy(PA_GBFSfile[GBFS_wav_number].File, GBFS_wav[PA_Channel], length, DMA_32NOW);
00182 
00183        <a class="code" href="group___sound_a_r_m9.html#ga4">PA_PlaySound</a>(PA_Channel, (<span class="keywordtype">void</span>*)GBFS_wav[PA_Channel], length &lt;&lt; 2, volume, freq);
00184 }
00185 
<a name="l00200"></a><a class="code" href="group___sound_a_r_m9.html#ga6">00200</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sound_a_r_m9.html#ga6">PA_PlaySimpleSound</a>(u8 PA_Channel, <span class="keyword">const</span> <span class="keywordtype">void</span>* data, u32 length){
00201 <a class="code" href="group___sound_a_r_m9.html#ga2">PA_PlaySoundEx</a>(PA_Channel, data, length, PA_SoundOption.volume, PA_SoundOption.freq, PA_SoundOption.format);
00202 }
00203 
00204 
<a name="l00216"></a><a class="code" href="group___sound_a_r_m9.html#ga7">00216</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sound_a_r_m9.html#ga7">PA_PlayGBFSSimpleSound</a>(u8 PA_Channel, u16 GBFS_wav_number){
00217 s32 length = (PA_GBFSfile[GBFS_wav_number].Length &gt;&gt; 2) + 1; <span class="comment">// Pour etre sur...</span>
00218        free(GBFS_wav[PA_Channel]);
00219        GBFS_wav[PA_Channel] = (u8*)malloc(length &lt;&lt; 2);
00220        
00221        DMA_Copy(PA_GBFSfile[GBFS_wav_number].File, GBFS_wav[PA_Channel], length, DMA_32NOW);
00222 
00223        <a class="code" href="group___sound_a_r_m9.html#ga6">PA_PlaySimpleSound</a>(PA_Channel, (<span class="keywordtype">void</span>*)GBFS_wav[PA_Channel], length &lt;&lt; 2);
00224 }
00225 
00226 
00227 
<a name="l00236"></a><a class="code" href="group___sound_a_r_m9.html#ga9">00236</a> <span class="preprocessor">#define PA_PlayMod(mod_snd) SndPlayMOD((u8*)mod_snd)</span>
00237 <span class="preprocessor"></span>
00238 
<a name="l00247"></a><a class="code" href="group___sound_a_r_m9.html#ga8">00247</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sound_a_r_m9.html#ga8">PA_PlayGBFSMod</a>(u16 GBFS_mod_number){
00248 s32 length = (PA_GBFSfile[GBFS_mod_number].Length &gt;&gt; 2) + 1; <span class="comment">// Pour etre sur...</span>
00249        free(GBFS_mod);
00250        GBFS_mod = (u8*)malloc(length &lt;&lt; 2);
00251 
00252        DMA_Copy(PA_GBFSfile[GBFS_mod_number].File, GBFS_mod, length, DMA_32NOW);
00253 <span class="comment">/*     s32 i; </span>
00254 <span class="comment">       u32 *mod = (u32*)PA_GBFSfile[GBFS_mod_number].File;     </span>
00255 <span class="comment">       for (i = 0; i &lt; length; i++) // Copy the file in RAM</span>
00256 <span class="comment">              GBFS_mod[i] = mod[i];*/</span>
00257        <a class="code" href="group___sound_a_r_m9.html#ga9">PA_PlayMod</a>(GBFS_mod);
00258 }
00259 
<a name="l00265"></a><a class="code" href="group___sound_a_r_m9.html#ga10">00265</a> <span class="preprocessor">#define PA_StopMod() SndStopMOD()</span>
00266 <span class="preprocessor"></span>
00267 
<a name="l00276"></a><a class="code" href="group___sound_a_r_m9.html#ga11">00276</a> <span class="preprocessor">#define PA_PauseMod(bool) SndPauseMOD(bool)</span>
00277 <span class="preprocessor"></span>
00278  <span class="comment">// end of SoundARM9</span>
00280 
00281 
00282 
00283 
00284 <span class="preprocessor">#endif</span>
00285 <span class="preprocessor"></span>
00286 
</pre></div><hr size="1"><address style="align: right;"><small>Généré le Fri Oct 28 23:18:13 2005 pour PA_lib par&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
