<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>PA_lib:  Fichier source de PA_Tile.h</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Généré par Doxygen 1.4.5 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Page&nbsp;principale</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li id="current"><a href="files.html"><span>Fichiers</span></a></li>
    <li><a href="dirs.html"><span>Répertoires</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" callpadding="0" border="0">
          <tr>
            <td><label>&nbsp;Rechercher&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>Liste&nbsp;des&nbsp;fichiers</span></a></li>
    <li><a href="globals.html"><span>Portée&nbsp;globale</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_C_3A_2FdevkitPro_2F.html">devkitPro</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_C_3A_2FdevkitPro_2FPAlib_2F.html">PAlib</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_C_3A_2FdevkitPro_2FPAlib_2Finclude_2F.html">include</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_C_3A_2FdevkitPro_2FPAlib_2Finclude_2FNDS_2F.html">NDS</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_C_3A_2FdevkitPro_2FPAlib_2Finclude_2FNDS_2Farm9_2F.html">arm9</a></div>
<h1>PA_Tile.h</h1><a href="_p_a___tile_8h.html">Aller à la documentation de ce fichier.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef _PA_Tile</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define _PA_Tile</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 
<a name="l00011"></a>00011 <span class="comment">//#include "../PA.h"</span>
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 
<a name="l00014"></a>00014 
<a name="l00016"></a>00016 <span class="comment">// Système de Tiles</span>
<a name="l00018"></a>00018 <span class="comment"></span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="comment">//background memory offset macros</span>
<a name="l00021"></a>00021 <span class="preprocessor">#define CharBaseBlock(screen, n) (((n)*0x4000) + 0x6000000 + (0x200000 *  screen))</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span><span class="preprocessor">#define ScreenBaseBlock(screen, n) (((n)*0x800) + 0x6000000 + (0x200000 *  screen))</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span><span class="keyword">extern</span> u32 PA_bgmap[2][4]; <span class="comment">// Pointeur vers les maps, 4 maps par screen</span>
<a name="l00024"></a>00024 <span class="keyword">extern</span> u8 tilesetchar[2][4];
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="comment">// Quantité de données à charger en fonction de la taille de la map...</span>
<a name="l00027"></a>00027 <span class="keyword">extern</span> u16 bg_sizes[4];
<a name="l00028"></a>00028 <span class="keyword">extern</span> u8 bg_place[4];
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="keyword">extern</span> u16 *PA_DrawBg[2]; <span class="comment">// Fond dessinable</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="keyword">extern</span> <span class="keywordtype">bool</span> charblocks[2][70];
<a name="l00034"></a>00034 <span class="keyword">extern</span> u16 tilesetsize[2][4]; <span class="comment">// Place utilisée pour chaque tileset</span>
<a name="l00035"></a>00035 <span class="keyword">extern</span> u16 mapsize[2][4]; <span class="comment">// Place utilisée pour chaque map</span>
<a name="l00036"></a>00036 <span class="keyword">extern</span> u8 tilesetchar[2][4];  <span class="comment">// Emplacement mémoire de chaque tileset</span>
<a name="l00037"></a>00037 <span class="keyword">extern</span> u8 mapchar[2][4];  <span class="comment">// Emplacement mémoire de chaque map</span>
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="keyword">extern</span> u8 charsetstart[2];
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 <span class="keyword">extern</span> s32 PA_parallaxX[2][4];
<a name="l00046"></a>00046 <span class="keyword">extern</span> s32 PA_parallaxY[2][4];
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00052"></a>00052        <span class="keywordtype">bool</span> infscroll; <span class="comment">// Passe à 1 si scrolling infini activé...</span>
<a name="l00053"></a>00053        u16* bg_map; <span class="comment">// Map</span>
<a name="l00054"></a>00054 <span class="comment">//     s32 x, y;</span>
<a name="l00055"></a>00055        s32 lx, ly;
<a name="l00056"></a>00056        s32 scrollx, scrolly;
<a name="l00057"></a>00057        s32 maxx; <span class="comment">// 32 ou 64, en fonction de la largeur...</span>
<a name="l00058"></a>00058 <span class="comment">//     s32 startx, starty;</span>
<a name="l00059"></a>00059 }scrollpositions;
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 <span class="keyword">extern</span> scrollpositions scrollpos[2][4]; <span class="comment">// Pour chaque écran et pour chaque fond :)</span>
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 
<a name="l00066"></a>00066 
<a name="l00067"></a>00067 
<a name="l00068"></a>00068 <span class="comment">// Mode de couleur</span>
<a name="l00069"></a>00069 <span class="preprocessor">#define BG_COLOR16 0x00</span>
<a name="l00070"></a>00070 <span class="preprocessor"></span><span class="preprocessor">#define BG_COLOR256 0x80</span>
<a name="l00071"></a>00071 <span class="preprocessor"></span>
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 <span class="preprocessor">#define CHAR_SHIFT 2</span>
<a name="l00074"></a>00074 <span class="preprocessor"></span><span class="preprocessor">#define SCREEN_SHIFT 8</span>
<a name="l00075"></a>00075 <span class="preprocessor"></span><span class="preprocessor">#define WRAPAROUND 0x1</span>
<a name="l00076"></a>00076 <span class="preprocessor"></span>
<a name="l00077"></a>00077 <span class="preprocessor">#define SCREEN_TILES 24576  // Taille à convertir pour avoir un écran complet...</span>
<a name="l00078"></a>00078 <span class="preprocessor"></span>
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 <span class="comment">//scrolling registers for background 0</span>
<a name="l00081"></a>00081 
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 <span class="comment">// Registre pour les controles de chaque écran</span>
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 <span class="preprocessor">#define REG_BGSCREEN0  0x04000000</span>
<a name="l00086"></a>00086 <span class="preprocessor"></span><span class="preprocessor">#define REG_BGSCREEN1  0x04001000</span>
<a name="l00087"></a>00087 <span class="preprocessor"></span><span class="preprocessor">#define REG_BGSCREEN(screen) (0x04000000 + (screen * 0x1000))</span>
<a name="l00088"></a>00088 <span class="preprocessor"></span>
<a name="l00089"></a>00089 <span class="preprocessor">#define REG_BGCNT(screen, bg_number) (0x4000008 + (screen * 0x1000) + (bg_number &lt;&lt; 1))</span>
<a name="l00090"></a>00090 <span class="preprocessor"></span>
<a name="l00091"></a>00091 <span class="comment">// Premier registre pour les scroll. On en déduit les autres en ajoutant pour le screen et le numéro du Bg</span>
<a name="l00092"></a>00092 <span class="preprocessor">#define REG_BGSCROLLX 0x4000010</span>
<a name="l00093"></a>00093 <span class="preprocessor"></span><span class="preprocessor">#define REG_BGSCROLLY 0x4000012</span>
<a name="l00094"></a>00094 <span class="preprocessor"></span>
<a name="l00095"></a>00095 
<a name="l00096"></a>00096 <span class="comment">// Tailles pour les Bg :</span>
<a name="l00097"></a>00097 <span class="preprocessor">#define BG_256X256 0</span>
<a name="l00098"></a>00098 <span class="preprocessor"></span><span class="preprocessor">#define BG_512X256 1</span>
<a name="l00099"></a>00099 <span class="preprocessor"></span><span class="preprocessor">#define BG_256X512 2</span>
<a name="l00100"></a>00100 <span class="preprocessor"></span><span class="preprocessor">#define BG_512X512 3</span>
<a name="l00101"></a>00101 <span class="preprocessor"></span>
<a name="l00102"></a>00102 <span class="preprocessor">#define BG_ROT_128X128 0</span>
<a name="l00103"></a>00103 <span class="preprocessor"></span><span class="preprocessor">#define BG_ROT_256X256 1</span>
<a name="l00104"></a>00104 <span class="preprocessor"></span><span class="preprocessor">#define BG_ROT_512X512 2</span>
<a name="l00105"></a>00105 <span class="preprocessor"></span><span class="preprocessor">#define BG_ROT_1024X1024 3</span>
<a name="l00106"></a>00106 <span class="preprocessor"></span>
<a name="l00107"></a>00107 <span class="keywordtype">void</span> PA_LoadRotBgMap(<span class="keywordtype">bool</span> screen, u8 bg_select, <span class="keywordtype">void</span>* bg_map, u8 bg_size);
<a name="l00108"></a>00108 
<a name="l00109"></a>00109 
<a name="l00110"></a>00110 <span class="comment">//ALL_BUT() pour faire tout sauf...</span>
<a name="l00111"></a>00111 <span class="preprocessor">#define TILE_N 1023</span>
<a name="l00112"></a>00112 <span class="preprocessor"></span><span class="preprocessor">#define TILE_PAL 61440</span>
<a name="l00113"></a>00113 <span class="preprocessor"></span><span class="preprocessor">#define TILE_HFLIP 1024</span>
<a name="l00114"></a>00114 <span class="preprocessor"></span><span class="preprocessor">#define TILE_VFLIP 2048</span>
<a name="l00115"></a>00115 <span class="preprocessor"></span>
<a name="l00116"></a>00116 
<a name="l00117"></a>00117 
<a name="l00129"></a>00129 <span class="keywordtype">void</span> <a class="code" href="group___tile.html#g2d5a1d83a7e38191696054043f715eaf">PA_ResetBgSys</a>(<span class="keywordtype">void</span>);
<a name="l00130"></a>00130 
<a name="l00153"></a>00153 <span class="keywordtype">void</span> <a class="code" href="group___tile.html#gc376fdecfc6d9185680008ed9773fd9b">PA_InitBg</a>(<span class="keywordtype">bool</span> screen, u8 bg_select, u8 bg_size, <span class="keywordtype">bool</span> wraparound, <span class="keywordtype">bool</span> color_mode);
<a name="l00154"></a>00154 <span class="comment">//#define PA_InitBg(screen, bg_select, bg_size, wraparound, color_mode) {    PA_bgmap[screen][bg_select] = ScreenBaseBlock(screen, ((bg_select + 1) &lt;&lt; 3) - bg_place[bg_size]);_REG16(REG_BGSCREEN(screen)) |= (0x100 &lt;&lt; (bg_select)); _REG16(REG_BGCNT(screen, bg_select)) = ((bg_select) | (bg_size &lt;&lt; 14) |((((bg_select + 1) &lt;&lt; 3) - bg_place[bg_size]) &lt;&lt; SCREEN_SHIFT) | (wraparound &lt;&lt; 13) | ((bg_select) &lt;&lt; 2)) + (color_mode &lt;&lt; 7);}</span>
<a name="l00155"></a>00155 
<a name="l00156"></a>00156 
<a name="l00169"></a><a class="code" href="group___tile.html#gba897d52686f3d5d6f73a1caaf79ee26">00169</a> <span class="preprocessor">#define PA_HideBg(screen, bg_select) _REG16(REG_BGSCREEN(screen)) &amp;= ~(0x100 &lt;&lt; (bg_select))</span>
<a name="l00170"></a>00170 <span class="preprocessor"></span>
<a name="l00171"></a>00171 
<a name="l00184"></a><a class="code" href="group___tile.html#g8a8718b76be9feff2603d08be1716d88">00184</a> <span class="preprocessor">#define PA_ShowBg(screen, bg_select) _REG16(REG_BGSCREEN(screen)) |= (0x100 &lt;&lt; (bg_select))</span>
<a name="l00185"></a>00185 <span class="preprocessor"></span>
<a name="l00186"></a>00186 
<a name="l00196"></a><a class="code" href="group___tile.html#g41221e3d6dc3583640167af2b3f3038b">00196</a> <span class="preprocessor">#define PA_ResetBg(screen) _REG16(REG_BGSCREEN(screen)) &amp;= ~(0xF00)</span>
<a name="l00197"></a>00197 <span class="preprocessor"></span>
<a name="l00198"></a>00198 
<a name="l00199"></a>00199 
<a name="l00215"></a><a class="code" href="group___tile.html#g08ec98c8cf3483885eb213c1a97bd9de">00215</a> <span class="preprocessor">#define PA_LoadBgTiles(screen, bg_select, bg_tiles) PA_LoadBgTilesEx(screen, bg_select, (void*)bg_tiles, SIZEOF_16BIT(bg_tiles))</span>
<a name="l00216"></a>00216 <span class="preprocessor"></span><span class="comment">//#define PA_LoadBgTiles(screen, bg_select, bg_tiles) {DMA_Copy((void*)(bg_tiles), (void*)CharBaseBlock(screen, bg_select),SIZEOF_16BIT(bg_tiles), DMA_16NOW);}</span>
<a name="l00217"></a>00217 
<a name="l00218"></a>00218 
<a name="l00238"></a>00238 <span class="keywordtype">void</span> <a class="code" href="group___tile.html#gbb521ed4d0c0e933c44697d52a37fdd9">PA_LoadBgTilesEx</a>(<span class="keywordtype">bool</span> screen, u8 bg_select, <span class="keywordtype">void</span>* bg_tiles, u16 size);
<a name="l00239"></a>00239 
<a name="l00240"></a>00240 
<a name="l00253"></a>00253 <span class="keywordtype">void</span> <a class="code" href="group___tile.html#g4e1fff4e111845d3306f9fc45d2dee94">PA_DeleteTiles</a>(<span class="keywordtype">bool</span> screen, u8 bg_select);
<a name="l00254"></a>00254 
<a name="l00255"></a>00255 
<a name="l00268"></a>00268 <span class="keywordtype">void</span> <a class="code" href="group___tile.html#g8cec1679ef455a66900ecf27664017ba">PA_DeleteMap</a>(<span class="keywordtype">bool</span> screen, u8 bg_select);
<a name="l00269"></a>00269 
<a name="l00270"></a>00270 
<a name="l00271"></a>00271 
<a name="l00284"></a><a class="code" href="group___tile.html#g0b7c1828dd35daaa375a6336f5a76aff">00284</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___tile.html#g0b7c1828dd35daaa375a6336f5a76aff">PA_DeleteBg</a>(<span class="keywordtype">bool</span> screen, u8 bg_select) {
<a name="l00285"></a>00285        <a class="code" href="group___tile.html#gba897d52686f3d5d6f73a1caaf79ee26">PA_HideBg</a>(screen, bg_select);
<a name="l00286"></a>00286        <a class="code" href="group___tile.html#g4e1fff4e111845d3306f9fc45d2dee94">PA_DeleteTiles</a>(screen, bg_select);
<a name="l00287"></a>00287        <a class="code" href="group___tile.html#g8cec1679ef455a66900ecf27664017ba">PA_DeleteMap</a>(screen, bg_select);
<a name="l00288"></a>00288 }
<a name="l00289"></a>00289 
<a name="l00309"></a>00309 <span class="keywordtype">void</span> <a class="code" href="group___tile.html#ga3e8b4fe3339fb19a144c93a85ca965f">PA_LoadBgMap</a>(<span class="keywordtype">bool</span> screen, u8 bg_select, <span class="keywordtype">void</span>* bg_map, u8 bg_size);
<a name="l00310"></a>00310 
<a name="l00311"></a>00311 
<a name="l00312"></a>00312 
<a name="l00341"></a><a class="code" href="group___tile.html#g1548cf281037f16367ffde226dce72cf">00341</a> <span class="preprocessor">#define PA_LoadSimpleBg(screen, bg_select, bg_tiles, bg_map, bg_size, wraparound, color_mode) {\</span>
<a name="l00342"></a>00342 <span class="preprocessor">PA_DeleteBg(screen, bg_select);\</span>
<a name="l00343"></a>00343 <span class="preprocessor">PA_LoadBgTiles(screen, bg_select, bg_tiles); \</span>
<a name="l00344"></a>00344 <span class="preprocessor">PA_LoadBgMap(screen, bg_select, (void*)bg_map, bg_size); \</span>
<a name="l00345"></a>00345 <span class="preprocessor">PA_InitBg(screen, bg_select, bg_size, wraparound, color_mode);\</span>
<a name="l00346"></a>00346 <span class="preprocessor">PA_BGScrollXY(screen, bg_select, 0, 0);}</span>
<a name="l00347"></a>00347 <span class="preprocessor"></span>
<a name="l00372"></a><a class="code" href="group___tile.html#g7b101e9d4ca0ea9b8e13f23e4e2022fa">00372</a> <span class="preprocessor">#define PA_LoadRotBg(screen, bg_select, bg_tiles, bg_map, bg_size, wraparound) {\</span>
<a name="l00373"></a>00373 <span class="preprocessor">PA_DeleteBg(screen, bg_select);\</span>
<a name="l00374"></a>00374 <span class="preprocessor">PA_LoadBgTiles(screen, bg_select, bg_tiles); \</span>
<a name="l00375"></a>00375 <span class="preprocessor">PA_LoadRotBgMap(screen, bg_select, (void*)bg_map, bg_size); \</span>
<a name="l00376"></a>00376 <span class="preprocessor">PA_InitBg(screen, bg_select, bg_size, wraparound, 1);\</span>
<a name="l00377"></a>00377 <span class="preprocessor">PA_SetBgRot(screen, bg_select, 0, 0, 0, 0, 0, 256);\</span>
<a name="l00378"></a>00378 <span class="preprocessor">}</span>
<a name="l00379"></a>00379 <span class="preprocessor"></span>
<a name="l00380"></a>00380 <span class="keywordtype">void</span> PA_SetBgRot(<span class="keywordtype">bool</span> screen, u8 bg_select, s32 x_scroll, s32 y_scroll, s32 x_rotcentre, s32 y_rotcentre, s16 bg_angle, s32 bg_zoom);
<a name="l00381"></a>00381 
<a name="l00413"></a><a class="code" href="group___tile.html#g02410c2796691887b7a7fc161abf834a">00413</a> <span class="preprocessor">#define PA_LoadBg(screen, bg_select, bg_tiles, tile_size, bg_map, bg_size, wraparound, color_mode) {\</span>
<a name="l00414"></a>00414 <span class="preprocessor">PA_LoadBgTilesEx(screen, bg_select, (void*)bg_tiles, tile_size); \</span>
<a name="l00415"></a>00415 <span class="preprocessor">PA_LoadBgMap(screen, bg_select, (void*)bg_map, bg_size); \</span>
<a name="l00416"></a>00416 <span class="preprocessor">PA_InitBg(screen, bg_select, bg_size, wraparound, color_mode);\</span>
<a name="l00417"></a>00417 <span class="preprocessor">PA_BGScrollXY(screen, bg_select, 0, 0);}</span>
<a name="l00418"></a>00418 <span class="preprocessor"></span>
<a name="l00419"></a>00419 
<a name="l00420"></a>00420 
<a name="l00436"></a><a class="code" href="group___tile.html#g584c1556a27c915814eb5dae2224afdd">00436</a> <span class="preprocessor">#define PA_BGScrollX(screen, bg_number, x) _REG16(REG_BGSCROLLX + ((screen) * 0x1000) + ((bg_number) &lt;&lt; 2)) = (x)&amp;1023</span>
<a name="l00437"></a>00437 <span class="preprocessor"></span>
<a name="l00450"></a><a class="code" href="group___tile.html#gb3bb9090e81d140c76b77c4b54d5f08d">00450</a> <span class="preprocessor">#define PA_GetBGScrollX(screen, bg_number) ((_REG16(REG_BGSCROLLX + ((screen) * 0x1000) + ((bg_number) &lt;&lt; 2))) &amp;1023)</span>
<a name="l00451"></a>00451 <span class="preprocessor"></span>
<a name="l00467"></a><a class="code" href="group___tile.html#gdbddb8a448b435c489c62da7f3b9026b">00467</a> <span class="preprocessor">#define PA_BGScrollY(screen, bg_number, y) _REG16(REG_BGSCROLLY + ((screen) * 0x1000) + ((bg_number) &lt;&lt; 2)) = (y)&amp;1023</span>
<a name="l00468"></a>00468 <span class="preprocessor"></span>
<a name="l00469"></a>00469 
<a name="l00470"></a>00470 
<a name="l00471"></a>00471 
<a name="l00484"></a><a class="code" href="group___tile.html#gcaf20e2c1d2b2706c2be733f581266ad">00484</a> <span class="preprocessor">#define PA_GetBGScrollY(screen, bg_number) ((_REG16(REG_BGSCROLLY + ((screen) * 0x1000) + ((bg_number) &lt;&lt; 2))) &amp;1023)</span>
<a name="l00485"></a>00485 <span class="preprocessor"></span>
<a name="l00504"></a><a class="code" href="group___tile.html#gbe127fd2ad27dcef9669a5e0e559e696">00504</a> <span class="preprocessor">#define PA_BGScrollXY(screen, bg_number, x, y) {PA_BGScrollX(screen, bg_number, x); PA_BGScrollY(screen, bg_number, y);}</span>
<a name="l00505"></a>00505 <span class="preprocessor"></span>
<a name="l00506"></a>00506 
<a name="l00507"></a>00507 
<a name="l00508"></a>00508 
<a name="l00530"></a>00530 <span class="comment">/*</span>
<a name="l00531"></a>00531 <span class="comment">extern inline void PA_SetMapTile(bool screen, u8 bg_select, u16 x, u16 y, u16 tile_number) {</span>
<a name="l00532"></a>00532 <span class="comment">u16 *PA_reg;</span>
<a name="l00533"></a>00533 <span class="comment">PA_reg = (u16*)(PA_bgmap[screen][bg_select] + ((x) &lt;&lt; 1) + ((y) &lt;&lt; 6));</span>
<a name="l00534"></a>00534 <span class="comment"></span>
<a name="l00535"></a>00535 <span class="comment">       *PA_reg &amp;= ALL_BUT(TILE_N);</span>
<a name="l00536"></a>00536 <span class="comment">       *PA_reg |= ((tile_number)&amp;TILE_N);</span>
<a name="l00537"></a>00537 <span class="comment">}*/</span>
<a name="l00538"></a><a class="code" href="group___tile.html#g513a8ec441c76da1f07cbbd324ec1b2f">00538</a> <span class="preprocessor">#define PA_SetMapTile(screen, bg_select, x, y, tile_number) {*(u16*)(PA_bgmap[screen][bg_select] + ((x) &lt;&lt; 1) + ((y) &lt;&lt; 6)) &amp;= ALL_BUT(TILE_N); *(u16*)(PA_bgmap[screen][bg_select] + ((x) &lt;&lt; 1) + ((y) &lt;&lt; 6)) |= ((tile_number)&amp;TILE_N);}</span>
<a name="l00539"></a>00539 <span class="preprocessor"></span>
<a name="l00540"></a>00540 
<a name="l00562"></a><a class="code" href="group___tile.html#ge5f3f2dbb952f5699104512576efe877">00562</a> <span class="preprocessor">#define PA_SetMapTileAll(screen, bg_select, x, y, tile_info) *(u16*)(PA_bgmap[screen][bg_select] + ((x) &lt;&lt; 1) + ((y) &lt;&lt; 6)) = tile_info</span>
<a name="l00563"></a>00563 <span class="preprocessor"></span>
<a name="l00564"></a>00564 
<a name="l00565"></a>00565 
<a name="l00566"></a>00566 
<a name="l00588"></a><a class="code" href="group___tile.html#g8265f0c049619d2a3fc5b8983d2cdf72">00588</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___tile.html#g8265f0c049619d2a3fc5b8983d2cdf72">PA_SetLargeMapTile</a>(<span class="keywordtype">bool</span> screen, u8 bg_select, s32 x, s32 y, u32 tile_info) {
<a name="l00589"></a>00589        u32 truex;
<a name="l00590"></a>00590        u32 mapblock = 0;
<a name="l00591"></a>00591        truex = x&amp;31;
<a name="l00592"></a>00592        mapblock = (x &gt;&gt; 5) &lt;&lt; 11; <span class="comment">// Permet d'avoir le bon block...</span>
<a name="l00593"></a>00593        
<a name="l00594"></a>00594        *(u16*)(PA_bgmap[screen][bg_select] + ((truex) &lt;&lt; 1) + ((y) &lt;&lt; 6) + mapblock) = tile_info;
<a name="l00595"></a>00595 }
<a name="l00596"></a>00596 
<a name="l00597"></a>00597 
<a name="l00598"></a>00598 
<a name="l00620"></a><a class="code" href="group___tile.html#ga02023564aaa78e4923bf5c68eca53c7">00620</a> #define <a class="code" href="group___tile.html#ga02023564aaa78e4923bf5c68eca53c7">PA_SetMapTileHflip</a>(screen, bg_select, x, y, hflip) {*(u16*)(PA_bgmap[screen][bg_select] + ((x) &lt;&lt; 1) + ((y) &lt;&lt; 6)) &amp;= ALL_BUT(TILE_HFLIP); *(u16*)(PA_bgmap[screen][bg_select] + ((x) &lt;&lt; 1) + ((y) &lt;&lt; 6)) |= ((hflip) &lt;&lt; 10);}
<a name="l00621"></a>00621 
<a name="l00622"></a>00622 
<a name="l00644"></a><a class="code" href="group___tile.html#g5d56e2f06e58237abd1c5ba600edbc22">00644</a> <span class="preprocessor">#define PA_SetMapTileVflip(screen, bg_select, x, y, vflip) {*(u16*)(PA_bgmap[screen][bg_select] + ((x) &lt;&lt; 1) + ((y) &lt;&lt; 6)) &amp;= ALL_BUT(TILE_VFLIP); *(u16*)(PA_bgmap[screen][bg_select] + ((x) &lt;&lt; 1) + ((y) &lt;&lt; 6)) |= ((vflip) &lt;&lt; 11);}</span>
<a name="l00645"></a>00645 <span class="preprocessor"></span>
<a name="l00646"></a>00646 
<a name="l00668"></a><a class="code" href="group___tile.html#g52dc347f6bedd84ca57ce733256a25b1">00668</a> <span class="preprocessor">#define PA_SetMapTilePal(screen, bg_select, x, y, palette_number) {*(u16*)(PA_bgmap[screen][bg_select] + ((x) &lt;&lt; 1) + ((y) &lt;&lt; 6)) &amp;= ALL_BUT(TILE_PAL); *(u16*)(PA_bgmap[screen][bg_select] + ((x) &lt;&lt; 1) + ((y) &lt;&lt; 6)) |= ((palette_number) &lt;&lt; 12);}</span>
<a name="l00669"></a>00669 <span class="preprocessor"></span>
<a name="l00670"></a>00670 
<a name="l00701"></a><a class="code" href="group___tile.html#gc7489dd2a66321d753744dc4f1020623">00701</a> <span class="preprocessor">#define PA_SetMapTileEx(screen, bg_select, x, y, tile_number, hflip, vflip, palette_number) *(u16*)(PA_bgmap[screen][bg_select] + ((x) &lt;&lt; 1) + ((y) &lt;&lt; 6)) = (tile_number) + ((hflip) &lt;&lt; 10) + ((vflip) &lt;&lt; 11) + ((palette_number) &lt;&lt; 12)</span>
<a name="l00702"></a>00702 <span class="preprocessor"></span>
<a name="l00703"></a>00703 
<a name="l00704"></a>00704 
<a name="l00717"></a><a class="code" href="group___tile.html#gac9f2016c918e087dd6ca548cba955c5">00717</a> <span class="preprocessor">#define PA_LoadTiledBitmap(screen, tiled_bitmap) PA_LoadBg(screen, 0, tiled_bitmap, SCREEN_TILES, bitmap, BG_256X256, 1, 1)</span>
<a name="l00718"></a>00718 <span class="preprocessor"></span>
<a name="l00719"></a>00719 
<a name="l00720"></a>00720 
<a name="l00721"></a>00721 
<a name="l00722"></a>00722 
<a name="l00723"></a>00723 
<a name="l00724"></a>00724 
<a name="l00725"></a>00725 
<a name="l00753"></a><a class="code" href="group___tile.html#g37b4586cdc9a6abed8f0d84705acb08c">00753</a> <span class="preprocessor">#define PA_LoadLargeBg(screen, bg_select, bg_tiles, bg_map, color_mode, lx, ly) {\</span>
<a name="l00754"></a>00754 <span class="preprocessor">PA_LoadSimpleBg(screen, bg_select, bg_tiles, Blank, BG_512X256, 1, color_mode);\</span>
<a name="l00755"></a>00755 <span class="preprocessor">PA_InitLargeBg(screen, bg_select, lx, ly, (void*)bg_map);}</span>
<a name="l00756"></a>00756 <span class="preprocessor"></span>
<a name="l00757"></a>00757 
<a name="l00758"></a>00758 
<a name="l00759"></a>00759 
<a name="l00790"></a><a class="code" href="group___tile.html#g003ab7a880c12a6fcc05e5b576fd2653">00790</a> <span class="preprocessor">#define PA_LoadLargeBgEx(screen, bg_select, bg_tiles, tile_size, bg_map, color_mode, lx, ly) {\</span>
<a name="l00791"></a>00791 <span class="preprocessor">PA_LoadBg(screen, bg_select, bg_tiles, tile_size, Blank, BG_512X256, 1, color_mode);\</span>
<a name="l00792"></a>00792 <span class="preprocessor">PA_InitLargeBg(screen, bg_select, lx, ly, (void*)bg_map);}</span>
<a name="l00793"></a>00793 <span class="preprocessor"></span>
<a name="l00794"></a>00794 
<a name="l00795"></a>00795 
<a name="l00796"></a>00796 
<a name="l00812"></a>00812 <span class="keywordtype">void</span> <a class="code" href="group___tile.html#g25ba858639e25a058bec2fa0f5999b31">PA_InfLargeScrollX</a>(<span class="keywordtype">bool</span> screen, u8 bg_select, s32 x);
<a name="l00813"></a>00813 
<a name="l00814"></a>00814 
<a name="l00830"></a>00830 <span class="keywordtype">void</span> <a class="code" href="group___tile.html#g85d650dcfa5f96ec941d7d0c7c7ac766">PA_InfLargeScrollY</a>(<span class="keywordtype">bool</span> screen, u8 bg_select, s32 y);
<a name="l00831"></a>00831 
<a name="l00832"></a>00832 
<a name="l00833"></a>00833 
<a name="l00852"></a><a class="code" href="group___tile.html#gb4bcdfc5e52b5b9a4fdf9fa8e04ca112">00852</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___tile.html#gb4bcdfc5e52b5b9a4fdf9fa8e04ca112">PA_InfLargeScrollXY</a>(<span class="keywordtype">bool</span> screen, u8 bg_select, s32 x, s32 y){
<a name="l00853"></a>00853        <a class="code" href="group___tile.html#g25ba858639e25a058bec2fa0f5999b31">PA_InfLargeScrollX</a>(screen, bg_select, x);
<a name="l00854"></a>00854        <a class="code" href="group___tile.html#g85d650dcfa5f96ec941d7d0c7c7ac766">PA_InfLargeScrollY</a>(screen, bg_select, y);
<a name="l00855"></a>00855 }
<a name="l00856"></a>00856 
<a name="l00872"></a>00872 <span class="keywordtype">void</span> <a class="code" href="group___tile.html#g4cce0f4acff071cc8de4426c39df2a32">PA_LargeScrollX</a>(<span class="keywordtype">bool</span> screen, u8 bg_select, s32 x);
<a name="l00873"></a>00873 
<a name="l00874"></a>00874 
<a name="l00890"></a>00890 <span class="keywordtype">void</span> <a class="code" href="group___tile.html#gfa4def96beaf866dee64265d65931565">PA_LargeScrollY</a>(<span class="keywordtype">bool</span> screen, u8 bg_select, s32 y);
<a name="l00891"></a>00891 
<a name="l00892"></a>00892 
<a name="l00893"></a>00893 
<a name="l00912"></a><a class="code" href="group___tile.html#g6e4532707f7b15a8640e9a4c4af1b979">00912</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___tile.html#g6e4532707f7b15a8640e9a4c4af1b979">PA_LargeScrollXY</a>(<span class="keywordtype">bool</span> screen, u8 bg_select, s32 x, s32 y){
<a name="l00913"></a>00913        <a class="code" href="group___tile.html#g4cce0f4acff071cc8de4426c39df2a32">PA_LargeScrollX</a>(screen, bg_select, x);
<a name="l00914"></a>00914        <a class="code" href="group___tile.html#gfa4def96beaf866dee64265d65931565">PA_LargeScrollY</a>(screen, bg_select, y);
<a name="l00915"></a>00915 }
<a name="l00916"></a>00916 
<a name="l00917"></a>00917 
<a name="l00918"></a>00918 
<a name="l00940"></a><a class="code" href="group___tile.html#g2e5d3c84a18554e185deb04af55dce00">00940</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___tile.html#g2e5d3c84a18554e185deb04af55dce00">PA_InitParallaxX</a>(<span class="keywordtype">bool</span> screen, s32 bg0, s32 bg1, s32 bg2, s32 bg3) {
<a name="l00941"></a>00941         PA_parallaxX[screen][0] = bg0;
<a name="l00942"></a>00942         PA_parallaxX[screen][1] = bg1;
<a name="l00943"></a>00943         PA_parallaxX[screen][2] = bg2;
<a name="l00944"></a>00944         PA_parallaxX[screen][3] = bg3;
<a name="l00945"></a>00945 }
<a name="l00946"></a>00946 
<a name="l00968"></a><a class="code" href="group___tile.html#g95e55de6ccff207916ecba9464625343">00968</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___tile.html#g95e55de6ccff207916ecba9464625343">PA_InitParallaxY</a>(<span class="keywordtype">bool</span> screen, s32 bg0, s32 bg1, s32 bg2, s32 bg3) {
<a name="l00969"></a>00969         PA_parallaxY[screen][0] = bg0;
<a name="l00970"></a>00970         PA_parallaxY[screen][1] = bg1;
<a name="l00971"></a>00971         PA_parallaxY[screen][2] = bg2;
<a name="l00972"></a>00972         PA_parallaxY[screen][3] = bg3;
<a name="l00973"></a>00973 }
<a name="l00974"></a>00974 
<a name="l00975"></a>00975 
<a name="l00976"></a>00976 
<a name="l00989"></a><a class="code" href="group___tile.html#gc09d74e7805a8e2598e59d060a3b96ae">00989</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___tile.html#gc09d74e7805a8e2598e59d060a3b96ae">PA_ParallaxScrollX</a>(<span class="keywordtype">bool</span> screen, s32 x){
<a name="l00990"></a>00990 u8 i;
<a name="l00991"></a>00991        <span class="keywordflow">for</span>(i = 0; i &lt; 4; i++) {
<a name="l00992"></a>00992               <span class="keywordflow">if</span> (PA_parallaxX[screen][i])  {
<a name="l00993"></a>00993                      <span class="keywordflow">if</span>(scrollpos[screen][i].infscroll) <a class="code" href="group___tile.html#g25ba858639e25a058bec2fa0f5999b31">PA_InfLargeScrollX</a>(screen, i, (PA_parallaxX[screen][i] * x) &gt;&gt; 8); <span class="comment">// Si bg en scrolling infini</span>
<a name="l00994"></a>00994                      <span class="keywordflow">else</span> <a class="code" href="group___tile.html#g584c1556a27c915814eb5dae2224afdd">PA_BGScrollX</a>(screen, i, (PA_parallaxX[screen][i] * x) &gt;&gt; 8); <span class="comment">// Sinon scrolling normal</span>
<a name="l00995"></a>00995               }
<a name="l00996"></a>00996        }
<a name="l00997"></a>00997 }
<a name="l00998"></a>00998 
<a name="l00999"></a>00999 
<a name="l01012"></a><a class="code" href="group___tile.html#ga85bbf86ba906228e68d226880d8d3b4">01012</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___tile.html#ga85bbf86ba906228e68d226880d8d3b4">PA_ParallaxScrollY</a>(<span class="keywordtype">bool</span> screen, s32 y){
<a name="l01013"></a>01013 u8 i;
<a name="l01014"></a>01014        <span class="keywordflow">for</span>(i = 0; i &lt; 4; i++) {
<a name="l01015"></a>01015               <span class="keywordflow">if</span> (PA_parallaxY[screen][i])  {
<a name="l01016"></a>01016                      <span class="keywordflow">if</span>(scrollpos[screen][i].infscroll) <a class="code" href="group___tile.html#g85d650dcfa5f96ec941d7d0c7c7ac766">PA_InfLargeScrollY</a>(screen, i, (PA_parallaxY[screen][i] * y) &gt;&gt; 8); <span class="comment">// Si bg en scrolling infini</span>
<a name="l01017"></a>01017                      <span class="keywordflow">else</span> <a class="code" href="group___tile.html#gdbddb8a448b435c489c62da7f3b9026b">PA_BGScrollY</a>(screen, i, (PA_parallaxY[screen][i] * y) &gt;&gt; 8); <span class="comment">// Sinon scrolling normal</span>
<a name="l01018"></a>01018               }
<a name="l01019"></a>01019        }
<a name="l01020"></a>01020 }
<a name="l01021"></a>01021 
<a name="l01022"></a>01022 
<a name="l01038"></a><a class="code" href="group___tile.html#g13fb55d8b6c9f410a02a9255a199094e">01038</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___tile.html#g13fb55d8b6c9f410a02a9255a199094e">PA_ParallaxScrollXY</a>(<span class="keywordtype">bool</span> screen, s32 x, s32 y){
<a name="l01039"></a>01039        <a class="code" href="group___tile.html#gc09d74e7805a8e2598e59d060a3b96ae">PA_ParallaxScrollX</a>(screen, x);
<a name="l01040"></a>01040        <a class="code" href="group___tile.html#ga85bbf86ba906228e68d226880d8d3b4">PA_ParallaxScrollY</a>(screen, y);
<a name="l01041"></a>01041 }
<a name="l01042"></a>01042 
<a name="l01043"></a>01043 
<a name="l01044"></a>01044 
<a name="l01060"></a><a class="code" href="group___tile.html#g3b2deef5ef30204e36f3f5f037521e37">01060</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___tile.html#g3b2deef5ef30204e36f3f5f037521e37">PA_SetBgPrio</a>(<span class="keywordtype">bool</span> screen, u8 bg, u8 prio) {
<a name="l01061"></a>01061        _REG16(REG_BGCNT(screen, bg)) &amp;= ~3;
<a name="l01062"></a>01062        _REG16(REG_BGCNT(screen, bg)) |= prio;
<a name="l01063"></a>01063 }
<a name="l01064"></a>01064 
<a name="l01065"></a>01065 
<a name="l01066"></a>01066  <span class="comment">// end of Backgrounds</span>
<a name="l01068"></a>01068 
<a name="l01069"></a>01069 
<a name="l01070"></a>01070 
<a name="l01071"></a>01071 <span class="comment">// Pas utilisé en direct par le programmaeur</span>
<a name="l01072"></a>01072 <span class="keywordtype">void</span> PA_InitLargeBg(<span class="keywordtype">bool</span> screen, u8 bg_select, s32 lx, s32 ly, <span class="keywordtype">void</span>* bg_map);
<a name="l01073"></a>01073 
<a name="l01074"></a>01074 
<a name="l01075"></a>01075 
<a name="l01076"></a>01076 <span class="preprocessor">#endif</span>
<a name="l01077"></a>01077 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Généré le Tue Oct 18 13:31:44 2005 pour PA_lib par&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.5 </small></address>
</body>
</html>
