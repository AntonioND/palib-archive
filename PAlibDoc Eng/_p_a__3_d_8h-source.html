<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>PAlib: PA_3D.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<h1>PA_3D.h</h1><a href="_p_a__3_d_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef _PA_3D</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define _PA_3D</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="preprocessor">#include &lt;nds.h&gt;</span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &lt;malloc.h&gt;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;nds/arm9/image.h&gt;</span>
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00008"></a>00008 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
<a name="l00009"></a>00009 <span class="preprocessor">#endif</span>
<a name="l00010"></a>00010 <span class="preprocessor"></span>
<a name="l00011"></a>00011 <span class="keyword">extern</span> <span class="keyword">const</span> u8 PAlib[];
<a name="l00012"></a>00012 <span class="keyword">extern</span> <span class="keyword">const</span> u32 PAlib_size[];
<a name="l00013"></a>00013 
<a name="l00014"></a>00014 <span class="preprocessor">#define texPCX 1</span>
<a name="l00015"></a>00015 <span class="preprocessor"></span><span class="preprocessor">#define texBIN 2</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span>
<a name="l00024"></a>00024 <span class="keyword">extern</span> <span class="keywordtype">int</span> textureID;
<a name="l00025"></a>00025 <span class="keyword">extern</span> <span class="keywordtype">float</span> angle3dX, angle3dY;
<a name="l00026"></a>00026 <span class="keyword">extern</span> <span class="keywordtype">float</span> viseeX, viseeY, viseeZ;
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="keyword">typedef</span> <span class="keyword">struct</span>{
<a name="l00029"></a>00029        u32 *callList;
<a name="l00030"></a>00030        <span class="keywordtype">float</span> maxx, maxy, maxz, minx, miny, minz;
<a name="l00031"></a>00031        <span class="keywordtype">float</span> scalex,scaley,scalez;
<a name="l00032"></a>00032 }PA_3DObject;
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 
<a name="l00048"></a>00048 <span class="keywordtype">void</span> <a class="code" href="group___d.html#g0ba6984995fbdad66db585af3798c511">PA_Init3D</a>(<span class="keywordtype">void</span>);
<a name="l00049"></a>00049 
<a name="l00055"></a>00055 <span class="keywordtype">void</span> PA_Init3DAndBg(<span class="keywordtype">void</span>);
<a name="l00056"></a>00056 
<a name="l00062"></a>00062 <span class="keywordtype">void</span> <a class="code" href="group___d.html#gaa7d3d59361326957115a677df91c022">PA_LoadSplash3D</a>(<span class="keywordtype">void</span>);
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 
<a name="l00090"></a>00090 <span class="keywordtype">void</span> <a class="code" href="group___d.html#g0c90cacaba74806a5ae18281f8991c1b">PA_Init3DDrawing</a>(<span class="keywordtype">float</span> x1, <span class="keywordtype">float</span> y1, <span class="keywordtype">float</span> z1, <span class="keywordtype">float</span> x2, <span class="keywordtype">float</span> y2, <span class="keywordtype">float</span> z2);
<a name="l00091"></a>00091 
<a name="l00092"></a>00092 
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 
<a name="l00129"></a>00129 <span class="keywordtype">void</span> <a class="code" href="group___d.html#g9cd945c3666501e83f96718b0064103c">PA_glulookat</a>(<span class="keywordtype">float</span> eyex, <span class="keywordtype">float</span> eyey, <span class="keywordtype">float</span> eyez, <span class="keywordtype">float</span> lookAtx, <span class="keywordtype">float</span> lookAty, <span class="keywordtype">float</span> lookAtz, <span class="keywordtype">float</span> upx, <span class="keywordtype">float</span> upy, <span class="keywordtype">float</span> upz);
<a name="l00136"></a>00136 <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> PA_image8to16(sImage* img)
<a name="l00137"></a>00137  {
<a name="l00138"></a>00138         <span class="keywordtype">int</span> i;
<a name="l00139"></a>00139 
<a name="l00140"></a>00140         u16* temp = (u16*)malloc(img-&gt;height*img-&gt;width*2);
<a name="l00141"></a>00141         
<a name="l00142"></a>00142         <span class="keywordflow">for</span>(i = 0; i &lt; img-&gt;height * img-&gt;width; i++)
<a name="l00143"></a>00143                temp[i] = img-&gt;palette[img-&gt;data8[i]] | (1&lt;&lt;15);
<a name="l00144"></a>00144 
<a name="l00145"></a>00145         img-&gt;data16 = temp;
<a name="l00146"></a>00146  }
<a name="l00147"></a>00147 
<a name="l00148"></a>00148 
<a name="l00149"></a>00149 <span class="keywordtype">void</span> <a class="code" href="group___d.html#g9f4f6d1909ff4034f85f3d10a0528d54">PA_VueKeys</a>(<span class="keywordtype">void</span>);
<a name="l00165"></a><a class="code" href="group___d.html#gfc30d0a44f4417610eaef3dafb087fcf">00165</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___d.html#gfc30d0a44f4417610eaef3dafb087fcf">PA_LoadTexture</a>(<span class="keywordtype">int</span> numtexture, u8* nomtexture, <span class="keywordtype">int</span> mode){
<a name="l00166"></a>00166        <span class="keywordflow">if</span>(mode == texBIN){
<a name="l00167"></a>00167        glBindTexture(0, numtexture);
<a name="l00168"></a>00168        glTexImage2D(0, 0, GL_RGB, TEXTURE_SIZE_128 , TEXTURE_SIZE_128, 0,TEXGEN_TEXCOORD, (u8*)nomtexture);
<a name="l00169"></a>00169        }
<a name="l00170"></a>00170        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(mode == texPCX){
<a name="l00171"></a>00171        sImage pcx;
<a name="l00172"></a>00172        loadPCX((u8*)nomtexture, &amp;pcx);
<a name="l00173"></a>00173        PA_image8to16(&amp;pcx);
<a name="l00174"></a>00174        glBindTexture(0, numtexture);
<a name="l00175"></a>00175        glTexImage2D(0, 0, GL_RGB, TEXTURE_SIZE_128 , TEXTURE_SIZE_128, 0, TEXGEN_TEXCOORD, pcx.data8);
<a name="l00176"></a>00176        }
<a name="l00177"></a>00177 }
<a name="l00186"></a><a class="code" href="group___d.html#gf0a7f82dcf61547b77fc47cce80ad0c1">00186</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___d.html#gf0a7f82dcf61547b77fc47cce80ad0c1">PA_Texture</a>(<span class="keywordtype">int</span> numtexture){
<a name="l00187"></a>00187 glBindTexture(0, numtexture);
<a name="l00188"></a>00188 }
<a name="l00230"></a>00230 <span class="keywordtype">void</span> <a class="code" href="group___d.html#g457f2f718db267c17c8d00a577d03b59">PA_3DBox</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">float</span> longueur, <span class="keywordtype">float</span> largeur, <span class="keywordtype">float</span> hauteur,<span class="keywordtype">float</span> rotatex, <span class="keywordtype">float</span> rotatey, <span class="keywordtype">float</span> rotatez, uint8 red, uint8 green, uint8 blue);
<a name="l00272"></a>00272 <span class="keywordtype">void</span> <a class="code" href="group___d.html#gd003f005b85dd55555a196a6498cdfc4">PA_3DBoxTexture</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">float</span> longueur, <span class="keywordtype">float</span> largeur, <span class="keywordtype">float</span> hauteur,<span class="keywordtype">float</span> rotatex, <span class="keywordtype">float</span> rotatey, <span class="keywordtype">float</span> rotatez,uint8 red, uint8 green, uint8 blue);
<a name="l00273"></a>00273 
<a name="l00274"></a>00274 
<a name="l00275"></a>00275 
<a name="l00290"></a><a class="code" href="group___d.html#g84ab7f68bcb9d4e16a855ef9288edcf5">00290</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___d.html#g84ab7f68bcb9d4e16a855ef9288edcf5">PA_Rotate3D</a>(<span class="keywordtype">float</span> x,<span class="keywordtype">float</span> y,<span class="keywordtype">float</span> z){
<a name="l00291"></a>00291        glRotateX(x);
<a name="l00292"></a>00292     glRotateY(y);
<a name="l00293"></a>00293        glRotateZ(z);
<a name="l00294"></a>00294 }
<a name="l00309"></a><a class="code" href="group___d.html#g318e96c6e74491d6775eb20388c51043">00309</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___d.html#g318e96c6e74491d6775eb20388c51043">PA_Translate3D</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z){
<a name="l00310"></a>00310 glTranslate3f32(floattof32(x),floattof32(y),floattof32(z));
<a name="l00311"></a>00311 }
<a name="l00326"></a><a class="code" href="group___d.html#gd8353dbcf07fbf82abe1bc9587b815c7">00326</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___d.html#gd8353dbcf07fbf82abe1bc9587b815c7">PA_Scale3D</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z){
<a name="l00327"></a>00327        <span class="keywordflow">if</span>(x==0.0)x=1.0;
<a name="l00328"></a>00328        <span class="keywordflow">if</span>(y==0.0)y=1.0;
<a name="l00329"></a>00329        <span class="keywordflow">if</span>(z==0.0)z=1.0;
<a name="l00330"></a>00330        MATRIX_SCALE = floattof32(x);
<a name="l00331"></a>00331        MATRIX_SCALE = floattof32(y);
<a name="l00332"></a>00332        MATRIX_SCALE = floattof32(z);
<a name="l00333"></a>00333 }
<a name="l00348"></a><a class="code" href="group___d.html#gcd5224397aa972cca3e0072635e6c913">00348</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___d.html#gcd5224397aa972cca3e0072635e6c913">PA_Vertex3D</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z){
<a name="l00349"></a>00349 glVertex3v16(floattov16(x),floattov16(y),floattov16(z));
<a name="l00350"></a>00350 }
<a name="l00356"></a><a class="code" href="group___d.html#ge06a3dc7d6a272eb812d7bc026a6cbdf">00356</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___d.html#ge06a3dc7d6a272eb812d7bc026a6cbdf">PA_3Dto2D</a>(){
<a name="l00357"></a>00357 MATRIX_IDENTITY = 0;
<a name="l00358"></a>00358 }
<a name="l00359"></a>00359 
<a name="l00360"></a>00360 
<a name="l00372"></a><a class="code" href="group___d.html#g7ca01f6b3e1e0662e505d9bddd15d7d4">00372</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___d.html#g7ca01f6b3e1e0662e505d9bddd15d7d4">PA_Vertex2D</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y){
<a name="l00373"></a>00373        <span class="keywordtype">float</span> x1 = (float)((x*0.36)/256)-0.18;
<a name="l00374"></a>00374        <span class="keywordtype">float</span> y1 = (float)((y*0.28)/192)-0.14;
<a name="l00375"></a>00375        glVertex3v16(floattov16(x1),floattov16(y1),floattov16(-0.2));
<a name="l00376"></a>00376 }
<a name="l00388"></a><a class="code" href="group___d.html#g2fcddfbedbe414aa3cdd755e312deb98">00388</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___d.html#g2fcddfbedbe414aa3cdd755e312deb98">PA_TexCoord</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y){
<a name="l00389"></a>00389 glTexCoord1i(TEXTURE_PACK(inttot16((<span class="keywordtype">int</span>)x),inttot16((<span class="keywordtype">int</span>)y)));
<a name="l00390"></a>00390 }
<a name="l00391"></a>00391 
<a name="l00392"></a>00392 
<a name="l00393"></a>00393 
<a name="l00394"></a>00394 
<a name="l00395"></a>00395 
<a name="l00396"></a>00396 
<a name="l00397"></a>00397 
<a name="l00398"></a>00398 <span class="keywordtype">int</span> PA_InitCallList(PA_3DObject *obj);
<a name="l00399"></a>00399 <span class="keywordtype">int</span> PA_VertexCallList(PA_3DObject *obj, <span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z);
<a name="l00400"></a>00400 <span class="keywordtype">int</span> PA_TexCoordCallList(PA_3DObject *obj, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y);
<a name="l00401"></a>00401 <span class="keywordtype">int</span> PA_EndCallList(PA_3DObject *obj);
<a name="l00402"></a>00402 <span class="keywordtype">int</span> PA_Draw3Dobject(PA_3DObject obj);
<a name="l00403"></a>00403 <span class="keywordtype">int</span> PA_ScaleCallList(PA_3DObject *obj, <span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z); <span class="comment">// end of 3D</span>
<a name="l00405"></a>00405 
<a name="l00406"></a>00406 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00407"></a>00407 <span class="preprocessor"></span>}
<a name="l00408"></a>00408 <span class="preprocessor">#endif</span>
<a name="l00409"></a>00409 <span class="preprocessor"></span>
<a name="l00410"></a>00410 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Jan 30 23:00:22 2007 for PAlib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1-p1 </small></address>
</body>
</html>
