<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>PAlib: PA_Sprite.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<h1>PA_Sprite.h</h1><a href="_p_a___sprite_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef _PA_Sprite</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define _PA_Sprite</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00005"></a>00005 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
<a name="l00006"></a>00006 <span class="preprocessor">#endif</span>
<a name="l00007"></a>00007 <span class="preprocessor"></span>
<a name="l00014"></a>00014 <span class="preprocessor">#include "PA_Math.h"</span>
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="preprocessor">#define EWRAM_DATA   __attribute__((section(".ewram")))</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span><span class="preprocessor">#define EWRAM_BSS    __attribute__((section(".sbss")))</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span><span class="preprocessor">#define PA_Cos(angle) PA_SIN[((angle) + 128)&amp;511]</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">#define PA_Sin(angle) PA_SIN[((angle))&amp;511]</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="keyword">const</span> s16 PA_SIN[512]; 
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#define MAX_DRAW 16  // Maximum 16 sprites dessinables...</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span>
<a name="l00025"></a>00025 
<a name="l00027"></a>00027 <span class="comment">// Système de sprites</span>
<a name="l00029"></a>00029 <span class="comment"></span>
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="preprocessor">#define OBJ_SIZE_8X8      0,0</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span><span class="preprocessor">#define OBJ_SIZE_16X16    0,1</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span><span class="preprocessor">#define OBJ_SIZE_32X32    0,2</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span><span class="preprocessor">#define OBJ_SIZE_64X64    0,3</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span><span class="preprocessor">#define OBJ_SIZE_16X8     1,0</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span><span class="preprocessor">#define OBJ_SIZE_32X8     1,1</span>
<a name="l00037"></a>00037 <span class="preprocessor"></span><span class="preprocessor">#define OBJ_SIZE_32X16    1,2</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span><span class="preprocessor">#define OBJ_SIZE_64X32    1,3</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span><span class="preprocessor">#define OBJ_SIZE_8X16     2,0</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span><span class="preprocessor">#define OBJ_SIZE_8X32     2,1</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span><span class="preprocessor">#define OBJ_SIZE_16X32    2,2</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span><span class="preprocessor">#define OBJ_SIZE_32X64    2,3</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span>
<a name="l00044"></a>00044 <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00045"></a>00045        u8 lx, ly;
<a name="l00046"></a>00046 } PA_sizes;
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 <span class="keyword">extern</span> <span class="keyword">const</span> PA_sizes PA_size[3][4];
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="preprocessor">#define BITS_16 65535</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span><span class="preprocessor">#define ALL_BUT(ATR) (BITS_16 - ATR)</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span>
<a name="l00054"></a>00054 <span class="preprocessor">#define PA_OBJ_X 511 //511, debugging...</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span><span class="preprocessor">#define PA_OBJ_Y 255</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span><span class="preprocessor">#define OBJ_ROT 256</span>
<a name="l00057"></a>00057 <span class="preprocessor"></span><span class="preprocessor">#define ALL_BUT_ROTSET 49663  // Numéro du rotset</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span><span class="preprocessor">#define ALL_BUT_PAL 4095</span>
<a name="l00059"></a>00059 <span class="preprocessor"></span>
<a name="l00060"></a>00060 <span class="preprocessor">#define DBLSIZE 512</span>
<a name="l00061"></a>00061 <span class="preprocessor"></span><span class="preprocessor">#define N_COLORS (1 &lt;&lt; 13)</span>
<a name="l00062"></a>00062 <span class="preprocessor"></span><span class="preprocessor">#define OBJ_MODE 3072</span>
<a name="l00063"></a>00063 <span class="preprocessor"></span><span class="preprocessor">#define OBJ_MOSAIC 4096</span>
<a name="l00064"></a>00064 <span class="preprocessor"></span><span class="preprocessor">#define OBJ_HFLIP 4096</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span><span class="preprocessor">#define OBJ_VFLIP 8192</span>
<a name="l00066"></a>00066 <span class="preprocessor"></span>
<a name="l00067"></a>00067 <span class="preprocessor">#define OBJ_GFX 1023</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span><span class="preprocessor">#define OBJ_PRIO 3072</span>
<a name="l00069"></a>00069 <span class="preprocessor"></span>
<a name="l00070"></a>00070 <span class="preprocessor">#define COLORS_256 1</span>
<a name="l00071"></a>00071 <span class="preprocessor"></span><span class="preprocessor">#define COLORS_16 0</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span>
<a name="l00073"></a>00073 
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 <span class="preprocessor">#define MEM_DECAL 5</span>
<a name="l00076"></a>00076 <span class="preprocessor"></span><span class="preprocessor">#define NUMBER_DECAL 7</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span>
<a name="l00078"></a>00078 
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 <span class="comment">// Mémoire gfx</span>
<a name="l00081"></a>00081 <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00082"></a>00082    u16 mem_block;  <span class="comment">// Emplacement en mémoire, de 0 à 1023</span>
<a name="l00083"></a>00083    u16 free; <span class="comment">// Doonées libres en ce point</span>
<a name="l00084"></a>00084 } mem_usage;
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 <span class="keyword">extern</span> u16 n_free_mem[2]; <span class="comment">// nombre d'emplacements libres</span>
<a name="l00087"></a>00087 <span class="keyword">extern</span> u8 used_mem[2][1024]; <span class="comment">// Note la quantité de mémoire utilisée en chaque point de la mémoire pour pouvoir effacer les gfx...</span>
<a name="l00088"></a>00088 <span class="keyword">extern</span> u8 obj_per_gfx[2][1024]; <span class="comment">// Nombre de sprites utilisant un gfx donné...</span>
<a name="l00089"></a>00089 <span class="keyword">extern</span> mem_usage free_mem[2][1024];
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 <span class="keyword">extern</span> u16 FirstGfx[2];
<a name="l00092"></a>00092 
<a name="l00093"></a>00093 <span class="keyword">extern</span> <span class="keyword">const</span> u16 PA_obj_sizes[4][3];
<a name="l00094"></a>00094 
<a name="l00095"></a>00095 <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00096"></a>00096    u16 atr0, atr1, atr2, atr3;
<a name="l00097"></a>00097 }obj_inf;
<a name="l00098"></a>00098 <span class="keyword">extern</span> obj_inf PA_obj[2][128];  <span class="comment">// Les 128 premiers pour l'écran du haut, et encore 128 pour l'écran du bas...</span>
<a name="l00099"></a>00099 
<a name="l00100"></a>00100 <span class="keyword">extern</span> u8 PA_SpritePrio[2][128]; <span class="comment">// Set the sprite priorities...</span>
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 <span class="comment">// Infos pour dessiner sur les sprites</span>
<a name="l00103"></a>00103 <span class="comment">/*</span>
<a name="l00104"></a>00104 <span class="comment">typedef struct {</span>
<a name="l00105"></a>00105 <span class="comment">       u8 screen; // Ecran</span>
<a name="l00106"></a>00106 <span class="comment">       u8 sprite;           // Numéro du sprite</span>
<a name="l00107"></a>00107 <span class="comment">       u8 wasdrawing; // Si on dessinait dessus ou pas avant</span>
<a name="l00108"></a>00108 <span class="comment">       s8 x, y;  // Position x et y d'avant</span>
<a name="l00109"></a>00109 <span class="comment">       u8 hsize, vsize; // Tailles</span>
<a name="l00110"></a>00110 <span class="comment">       u8 n_colors; // Nombre de couleurs</span>
<a name="l00111"></a>00111 <span class="comment">       u8 drawsize;</span>
<a name="l00112"></a>00112 <span class="comment">       u32 *gfxpointer; // Pour dessiner à l'écran directement</span>
<a name="l00113"></a>00113 <span class="comment">} PA_DrawSprites;</span>
<a name="l00114"></a>00114 <span class="comment">*/</span>
<a name="l00115"></a>00115 
<a name="l00116"></a>00116 
<a name="l00117"></a>00117 <span class="comment">//extern PA_DrawSprites PA_DrawSprite[MAX_DRAW];</span>
<a name="l00118"></a>00118 
<a name="l00119"></a>00119 <span class="comment">// Pour le dessin sur sprite</span>
<a name="l00120"></a>00120 <span class="keyword">extern</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *PA_SpriteBuffer[MAX_DRAW]; <span class="comment">// Pointeurs vers les buffers  que l'on créera à la volée</span>
<a name="l00121"></a>00121 
<a name="l00122"></a>00122 <span class="keyword">extern</span> u16 *PA_SpriteAnimP[2][1024];
<a name="l00123"></a>00123 
<a name="l00124"></a>00124 
<a name="l00125"></a>00125 <span class="preprocessor">#define ANIM_LOOP 0 // loop around</span>
<a name="l00126"></a>00126 <span class="preprocessor"></span><span class="preprocessor">#define ANIM_UPDOWN 1 // back and forth animation</span>
<a name="l00127"></a>00127 <span class="preprocessor"></span>
<a name="l00128"></a>00128 <span class="preprocessor">#define ANIM_ONESHOT ANIM_LOOP, 1</span>
<a name="l00129"></a>00129 <span class="preprocessor"></span><span class="preprocessor">#define ANIM_INFINITE ANIM_LOOP, -1</span>
<a name="l00130"></a>00130 <span class="preprocessor"></span>
<a name="l00131"></a>00131 
<a name="l00132"></a>00132 
<a name="l00133"></a>00133 <span class="keyword">extern</span> s16 nspriteanims; <span class="comment">// Number of animated sprites currently...</span>
<a name="l00134"></a>00134 <span class="keyword">typedef</span> <span class="keyword">struct</span>{
<a name="l00135"></a>00135        s32 firstframe, lastframe, currentframe; <span class="comment">// frames...</span>
<a name="l00136"></a>00136        s8 framechange; <span class="comment">// 1 by default, -1 to go back...</span>
<a name="l00137"></a>00137        s32 time; <span class="comment">// Time...</span>
<a name="l00138"></a>00138        u8 lx, ly; <span class="comment">// Sprite sizes</span>
<a name="l00139"></a>00139        u8 colors; 
<a name="l00140"></a>00140        s16 speed;
<a name="l00141"></a>00141        u8 play;
<a name="l00142"></a>00142        u16 *gfx; <span class="comment">// gfx pointer</span>
<a name="l00143"></a>00143        u8 type;
<a name="l00144"></a>00144        s32 ncycles;
<a name="l00145"></a>00145        u32 HideX;
<a name="l00146"></a>00146 <span class="comment">//     bool exists; //</span>
<a name="l00147"></a>00147 } spriteanim;
<a name="l00148"></a>00148 <span class="keyword">extern</span> spriteanim spriteanims[2][128]; <span class="comment">// Init the array on PAlib init...</span>
<a name="l00149"></a>00149 
<a name="l00150"></a>00150 <span class="comment">//#define spriteanimsize 40</span>
<a name="l00151"></a>00151 
<a name="l00152"></a>00152 
<a name="l00153"></a>00153 
<a name="l00154"></a>00154 <span class="keyword">extern</span> u8 PA_SpriteExtPrio;
<a name="l00155"></a>00155 
<a name="l00156"></a>00156 
<a name="l00157"></a>00157 
<a name="l00158"></a>00158 
<a name="l00159"></a>00159 
<a name="l00160"></a>00160 
<a name="l00161"></a>00161 <span class="preprocessor">#define OAM0 0x07000000</span>
<a name="l00162"></a>00162 <span class="preprocessor"></span><span class="preprocessor">#define OAM1 0x07000400</span>
<a name="l00163"></a>00163 <span class="preprocessor"></span>
<a name="l00164"></a>00164 
<a name="l00177"></a><a class="code" href="group___sprite.html#g9af951fe9c7c3faca32d0a1e039ec8be">00177</a> <span class="preprocessor">#define PA_UpdateOAM0() DMA_Copy((void*)PA_obj, (void*)OAM0, 256, DMA_32NOW)</span>
<a name="l00178"></a>00178 <span class="preprocessor"></span>
<a name="l00184"></a><a class="code" href="group___sprite.html#geafedd78475febc931b34aeba95c2f14">00184</a> <span class="preprocessor">#define PA_UpdateOAM1() DMA_Copy((void*)PA_obj + 256, (void*)OAM1, 256, DMA_32NOW)</span>
<a name="l00185"></a>00185 <span class="preprocessor"></span>
<a name="l00186"></a>00186 
<a name="l00187"></a>00187 
<a name="l00188"></a>00188 
<a name="l00189"></a>00189 
<a name="l00190"></a>00190 
<a name="l00197"></a>00197 <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#g00ec06b6dcb233eff61098743018cd4a">PA_UpdateOAM</a>(<span class="keywordtype">void</span>);
<a name="l00198"></a>00198 
<a name="l00199"></a>00199 
<a name="l00221"></a>00221 u16 <a class="code" href="group___sprite.html#g13cf9bfdba81fd1db52c36657c86a485">PA_CreateGfx</a>(u8 screen, <span class="keywordtype">void</span>* obj_data, u8 obj_shape, u8 obj_size, u8 color_mode);
<a name="l00222"></a>00222 
<a name="l00231"></a>00231 <span class="keywordtype">void</span> PA_ResetSpriteSysScreen(u8 screen);
<a name="l00232"></a>00232 
<a name="l00233"></a>00233 
<a name="l00239"></a>00239 <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#g7c97c5d0c410350615f4bc46f8b3fadf">PA_ResetSpriteSys</a>(<span class="keywordtype">void</span>);
<a name="l00240"></a>00240 
<a name="l00241"></a>00241 
<a name="l00242"></a>00242 
<a name="l00275"></a><a class="code" href="group___sprite.html#gf3ff1df272606a10c4e0cb0f6a5395c1">00275</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#gf3ff1df272606a10c4e0cb0f6a5395c1">PA_CreateSprite</a>(u8 screen, u8 obj_number, <span class="keywordtype">void</span>* obj_data, u8 obj_shape, u8 obj_size, u8 color_mode, u8 palette, s16 x, s16 y) {
<a name="l00276"></a>00276    PA_obj[screen][obj_number].atr2 = <a class="code" href="group___sprite.html#g13cf9bfdba81fd1db52c36657c86a485">PA_CreateGfx</a>(screen, obj_data, obj_shape, obj_size, color_mode) + (palette &lt;&lt; 12);
<a name="l00277"></a>00277    PA_obj[screen][obj_number].atr0 = (y&amp;PA_OBJ_Y) + (color_mode &lt;&lt; 13) + (obj_shape &lt;&lt; 14);
<a name="l00278"></a>00278    PA_obj[screen][obj_number].atr1 = (x &amp; PA_OBJ_X) + (obj_size &lt;&lt; 14);
<a name="l00279"></a>00279 };
<a name="l00280"></a>00280 
<a name="l00331"></a><a class="code" href="group___sprite.html#gafc23252312c159966d08092e0dd9255">00331</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#gafc23252312c159966d08092e0dd9255">PA_CreateSpriteEx</a>(u8 screen, u8 obj_number, <span class="keywordtype">void</span>* obj_data, u8 obj_shape, u8 obj_size, u8 color_mode, u8 palette, u8 obj_mode, u8 mosaic, u8 hflip, u8 vflip, u8 prio, u8 dblsize, s16 x, s16 y) {
<a name="l00332"></a>00332    PA_obj[screen][obj_number].atr2 = <a class="code" href="group___sprite.html#g13cf9bfdba81fd1db52c36657c86a485">PA_CreateGfx</a>(screen, obj_data, obj_shape, obj_size, color_mode) + (prio &lt;&lt; 10) + (palette &lt;&lt; 12);
<a name="l00333"></a>00333    PA_obj[screen][obj_number].atr0 = (y&amp;PA_OBJ_Y) + (dblsize &lt;&lt; 9) + (obj_mode &lt;&lt; 10) + (mosaic &lt;&lt; 12) + ((color_mode) &lt;&lt; 13) + (obj_shape &lt;&lt; 14);
<a name="l00334"></a>00334    PA_obj[screen][obj_number].atr1 = (x &amp; PA_OBJ_X) + (hflip &lt;&lt; 12) + (vflip &lt;&lt; 13) + (obj_size &lt;&lt; 14);
<a name="l00335"></a>00335 };
<a name="l00336"></a>00336 
<a name="l00337"></a>00337 
<a name="l00338"></a>00338 
<a name="l00339"></a>00339 
<a name="l00340"></a>00340 
<a name="l00382"></a><a class="code" href="group___sprite.html#g420e828590dcef56391a6f9059cc8c5c">00382</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#g420e828590dcef56391a6f9059cc8c5c">PA_Create16bitSpriteEx</a>(u8 screen, u8 obj_number, <span class="keywordtype">void</span>* obj_data, u8 obj_shape, u8 obj_size, u8 mosaic, u8 hflip, u8 vflip, u8 prio, u8 dblsize, s16 x, s16 y){
<a name="l00383"></a>00383    PA_obj[screen][obj_number].atr2 = <a class="code" href="group___sprite.html#g13cf9bfdba81fd1db52c36657c86a485">PA_CreateGfx</a>(screen, obj_data, obj_shape, obj_size, 2) + (prio &lt;&lt; 10);<span class="comment">// + (15 &lt;&lt; 12);</span>
<a name="l00384"></a>00384    PA_obj[screen][obj_number].atr0 = (y&amp;PA_OBJ_Y) + (dblsize &lt;&lt; 9) + (3 &lt;&lt; 10) + (mosaic &lt;&lt; 12) + (0 &lt;&lt; 13) + (obj_shape &lt;&lt; 14);
<a name="l00385"></a>00385    PA_obj[screen][obj_number].atr1 = (x &amp; PA_OBJ_X) + (hflip &lt;&lt; 12) + (vflip &lt;&lt; 13) + (obj_size &lt;&lt; 14);
<a name="l00386"></a>00386 }
<a name="l00387"></a>00387 
<a name="l00388"></a>00388 
<a name="l00389"></a>00389 
<a name="l00390"></a>00390 
<a name="l00417"></a><a class="code" href="group___sprite.html#g533482a4c4e4431b880820c352f7655a">00417</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#g533482a4c4e4431b880820c352f7655a">PA_Create16bitSpriteFromGfx</a>(u8 screen, u8 obj_number, u16 gfx, u8 obj_shape, u8 obj_size, s16 x, s16 y){
<a name="l00418"></a>00418    PA_obj[screen][obj_number].atr2 = gfx + (15 &lt;&lt; 12);
<a name="l00419"></a>00419    PA_obj[screen][obj_number].atr0 = (y&amp;PA_OBJ_Y) + (3 &lt;&lt; 10) + (obj_shape &lt;&lt; 14);
<a name="l00420"></a>00420    PA_obj[screen][obj_number].atr1 = (x &amp; PA_OBJ_X) + (obj_size &lt;&lt; 14);
<a name="l00421"></a>00421 }
<a name="l00422"></a>00422 
<a name="l00423"></a>00423 
<a name="l00424"></a>00424 
<a name="l00425"></a>00425 
<a name="l00426"></a>00426 
<a name="l00453"></a><a class="code" href="group___sprite.html#ge3bee1bc3d320b0c368d20fb7131bc0d">00453</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#ge3bee1bc3d320b0c368d20fb7131bc0d">PA_Create16bitSprite</a>(u8 screen, u8 obj_number, <span class="keywordtype">void</span>* obj_data, u8 obj_shape, u8 obj_size, s16 x, s16 y){
<a name="l00454"></a>00454 <a class="code" href="group___sprite.html#g420e828590dcef56391a6f9059cc8c5c">PA_Create16bitSpriteEx</a>(screen, obj_number, obj_data, obj_shape, obj_size, 0, 0, 0, 0, 0, x, y);
<a name="l00455"></a>00455 }
<a name="l00456"></a>00456 
<a name="l00457"></a>00457 
<a name="l00458"></a>00458 
<a name="l00459"></a>00459 
<a name="l00492"></a><a class="code" href="group___sprite.html#g06d345ac7c5ee7f196353f3f91c56532">00492</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#g06d345ac7c5ee7f196353f3f91c56532">PA_CreateSpriteFromGfx</a>(u8 screen, u8 obj_number, u16 obj_gfx, u8 obj_shape, u8 obj_size, u8 color_mode, u8 palette, s16 x, s16 y) {
<a name="l00493"></a>00493    PA_obj[screen][obj_number].atr2 = obj_gfx + (palette &lt;&lt; 12);
<a name="l00494"></a>00494    PA_obj[screen][obj_number].atr0 = (y&amp;PA_OBJ_Y) + (color_mode &lt;&lt; 13) + (obj_shape &lt;&lt; 14);
<a name="l00495"></a>00495    PA_obj[screen][obj_number].atr1 = (x &amp; PA_OBJ_X) + (obj_size &lt;&lt; 14);
<a name="l00496"></a>00496    ++obj_per_gfx[screen][obj_gfx];
<a name="l00497"></a>00497 };
<a name="l00498"></a>00498 
<a name="l00549"></a><a class="code" href="group___sprite.html#gf9d73a0c236b959a22fd9be887b56190">00549</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#gf9d73a0c236b959a22fd9be887b56190">PA_CreateSpriteExFromGfx</a>(u8 screen, u8 obj_number, u16 obj_gfx, u8 obj_shape, u8 obj_size, u8 color_mode, u8 palette, u8 obj_mode, u8 mosaic, u8 hflip, u8 vflip, u8 prio, u8 dblsize, s16 x, s16 y) {
<a name="l00550"></a>00550    PA_obj[screen][obj_number].atr2 = obj_gfx + (prio &lt;&lt; 10) + (palette &lt;&lt; 12);
<a name="l00551"></a>00551    PA_obj[screen][obj_number].atr0 = (y&amp;PA_OBJ_Y) + (dblsize &lt;&lt; 9) + (obj_mode &lt;&lt; 10) + (mosaic &lt;&lt; 12) + (color_mode &lt;&lt; 13) + (obj_shape &lt;&lt; 14);
<a name="l00552"></a>00552    PA_obj[screen][obj_number].atr1 = (x &amp; PA_OBJ_X) + (hflip &lt;&lt; 12) + (vflip &lt;&lt; 13) + (obj_size &lt;&lt; 14);
<a name="l00553"></a>00553    ++obj_per_gfx[screen][obj_gfx];
<a name="l00554"></a>00554 };
<a name="l00555"></a>00555 
<a name="l00556"></a>00556 
<a name="l00571"></a><a class="code" href="group___sprite.html#g1c44c32e4774169e2397ea7889ca6436">00571</a> <span class="preprocessor">#define PA_UpdateSpriteGfx(screen, obj_number, obj_data) PA_UpdateGfx(screen, PA_GetSpriteGfx(screen, obj_number), obj_data)</span>
<a name="l00572"></a>00572 <span class="preprocessor"></span>
<a name="l00590"></a><a class="code" href="group___sprite.html#g44454768a7bf46205aef1cfbd340e6af">00590</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#g44454768a7bf46205aef1cfbd340e6af">PA_UpdateGfx</a>(u8 screen, u16 gfx_number, <span class="keywordtype">void</span> *obj_data) {
<a name="l00591"></a>00591        DMA_Copy((obj_data), (<span class="keywordtype">void</span>*)(SPRITE_GFX1 + (0x200000 *  (screen)) + ((gfx_number) &lt;&lt; NUMBER_DECAL)), (used_mem[screen][gfx_number] &lt;&lt; (MEM_DECAL+1)), DMA_16NOW);
<a name="l00592"></a>00592 <span class="comment">//     PA_OutputText(1, 25, PA_Rand()&amp;15, "%dgfx   ", gfx_number);</span>
<a name="l00593"></a>00593 }
<a name="l00594"></a>00594 
<a name="l00595"></a>00595 
<a name="l00611"></a><a class="code" href="group___sprite.html#gede715c923dccb2a649029ae1742ee4a">00611</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#gede715c923dccb2a649029ae1742ee4a">PA_UpdateGfxAndMem</a>(u8 screen, u8 gfx_number, <span class="keywordtype">void</span> *obj_data){
<a name="l00612"></a>00612        DMA_Copy((obj_data), (<span class="keywordtype">void</span>*)(SPRITE_GFX1 + (0x200000 *  (screen)) + ((gfx_number) &lt;&lt; NUMBER_DECAL)), (used_mem[screen][gfx_number] &lt;&lt; MEM_DECAL), DMA_32NOW);
<a name="l00613"></a>00613        PA_SpriteAnimP[screen][gfx_number] = (u16*)obj_data; <span class="comment">// mémorise la source de l'image...</span>
<a name="l00614"></a>00614 }
<a name="l00615"></a>00615 
<a name="l00616"></a>00616 
<a name="l00617"></a>00617 
<a name="l00618"></a>00618 
<a name="l00630"></a>00630 <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#gcbfc3e66ceaa548e28899810ae08d26c">PA_DeleteGfx</a>(u8 screen, u16 obj_gfx);
<a name="l00631"></a>00631 
<a name="l00632"></a>00632 
<a name="l00644"></a>00644 <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#g3b88f09871c225c80273a8d4a55c37f2">PA_DeleteSprite</a>(u8 screen, u8 obj_number);
<a name="l00645"></a>00645 
<a name="l00646"></a>00646 
<a name="l00662"></a><a class="code" href="group___sprite.html#g07261631ed2d033e15fc1557e386ffe4">00662</a> <span class="preprocessor">#define PA_SetSpriteRotEnable(screen, sprite, rotset) {PA_obj[screen][sprite].atr0 |= OBJ_ROT;  PA_obj[screen][sprite].atr1 = (PA_obj[screen][sprite].atr1 &amp; ALL_BUT_ROTSET) + ((rotset) &lt;&lt; 9);}</span>
<a name="l00663"></a>00663 <span class="preprocessor"></span>
<a name="l00675"></a><a class="code" href="group___sprite.html#gf3c02384ab8e196fb1959f9390fd746d">00675</a> <span class="preprocessor">#define PA_SetSpriteRotDisable(screen, sprite) {PA_obj[screen][sprite].atr0 &amp;= ALL_BUT(OBJ_ROT);  PA_obj[screen][sprite].atr1 &amp;= ALL_BUT_ROTSET;}</span>
<a name="l00676"></a>00676 <span class="preprocessor"></span>
<a name="l00677"></a>00677 
<a name="l00699"></a><a class="code" href="group___sprite.html#g39afb930b8780967626c46d192cfc8cb">00699</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#g39afb930b8780967626c46d192cfc8cb">PA_SetRotset</a>(u8 screen, u8 rotset, s16 angle, u16 zoomx, u16 zoomy) {
<a name="l00700"></a>00700 u8 obj_num = (rotset &lt;&lt; 2);
<a name="l00701"></a>00701        PA_obj[screen][obj_num].atr3 = (<a class="code" href="group___math.html#gb5ea9e1c5c885643135248810033aadf">PA_Cos</a>(angle) * zoomx) &gt;&gt; 8;
<a name="l00702"></a>00702        PA_obj[screen][obj_num + 1].atr3 = (-<a class="code" href="group___math.html#g154d0c5d208521b2bd2d0a9866277bd7">PA_Sin</a>(angle) * zoomy) &gt;&gt; 8;
<a name="l00703"></a>00703        PA_obj[screen][obj_num + 2].atr3 = (<a class="code" href="group___math.html#g154d0c5d208521b2bd2d0a9866277bd7">PA_Sin</a>(angle) * zoomx) &gt;&gt; 8;
<a name="l00704"></a>00704        PA_obj[screen][obj_num + 3].atr3 = (<a class="code" href="group___math.html#gb5ea9e1c5c885643135248810033aadf">PA_Cos</a>(angle) * zoomy) &gt;&gt; 8;
<a name="l00705"></a>00705 }
<a name="l00706"></a>00706 
<a name="l00721"></a><a class="code" href="group___sprite.html#g0d8ea45c1c458dbe884eb509166bb894">00721</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#g0d8ea45c1c458dbe884eb509166bb894">PA_SetRotsetNoZoom</a>(u8 screen, u8 rotset, s16 angle)   {
<a name="l00722"></a>00722 u8 obj_num = (rotset &lt;&lt; 2);
<a name="l00723"></a>00723        PA_obj[screen][obj_num].atr3 = <a class="code" href="group___math.html#gb5ea9e1c5c885643135248810033aadf">PA_Cos</a>(angle);
<a name="l00724"></a>00724        PA_obj[screen][obj_num + 1].atr3 = -<a class="code" href="group___math.html#g154d0c5d208521b2bd2d0a9866277bd7">PA_Sin</a>(angle);
<a name="l00725"></a>00725        PA_obj[screen][obj_num + 2].atr3 = <a class="code" href="group___math.html#g154d0c5d208521b2bd2d0a9866277bd7">PA_Sin</a>(angle);
<a name="l00726"></a>00726        PA_obj[screen][obj_num + 3].atr3 = <a class="code" href="group___math.html#gb5ea9e1c5c885643135248810033aadf">PA_Cos</a>(angle);
<a name="l00727"></a>00727 }
<a name="l00728"></a>00728 
<a name="l00746"></a><a class="code" href="group___sprite.html#g119bcd7d495cc380098a4ca92f7222b3">00746</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#g119bcd7d495cc380098a4ca92f7222b3">PA_SetRotsetNoAngle</a>(u8 screen, u8 rotset, u16 zoomx, u16 zoomy) {
<a name="l00747"></a>00747 u8 obj_num = (rotset &lt;&lt; 2);
<a name="l00748"></a>00748        PA_obj[screen][obj_num].atr3 = zoomx;
<a name="l00749"></a>00749        PA_obj[screen][obj_num + 1].atr3 = 0;
<a name="l00750"></a>00750        PA_obj[screen][obj_num + 2].atr3 = 0;
<a name="l00751"></a>00751        PA_obj[screen][obj_num + 3].atr3 = zoomy;
<a name="l00752"></a>00752 }
<a name="l00753"></a>00753 
<a name="l00754"></a>00754 
<a name="l00755"></a>00755 
<a name="l00756"></a>00756 
<a name="l00757"></a>00757 
<a name="l00758"></a>00758 
<a name="l00759"></a>00759 
<a name="l00776"></a><a class="code" href="group___sprite.html#g4bf93eaa77e6e533cc05f873a35bb95a">00776</a> <span class="preprocessor">#define PA_SetSpriteX(screen, obj, x) PA_obj[screen][obj].atr1 = (PA_obj[screen][obj].atr1 &amp; ALL_BUT(PA_OBJ_X)) + ((x) &amp; PA_OBJ_X)</span>
<a name="l00777"></a>00777 <span class="preprocessor"></span>
<a name="l00790"></a><a class="code" href="group___sprite.html#g353097a994619fb54e46b8fff6eb15ca">00790</a> <span class="preprocessor">#define PA_GetSpriteX(screen, obj) (PA_obj[screen][obj].atr1 &amp; (PA_OBJ_X))</span>
<a name="l00791"></a>00791 <span class="preprocessor"></span>
<a name="l00792"></a>00792 
<a name="l00807"></a><a class="code" href="group___sprite.html#gced1fba7a40575fe1b7794b45255d5e9">00807</a> <span class="preprocessor">#define PA_SetSpriteY(screen, obj, y) PA_obj[screen][obj].atr0 = (PA_obj[screen][obj].atr0 &amp; ALL_BUT(PA_OBJ_Y)) + ((y) &amp; PA_OBJ_Y)</span>
<a name="l00808"></a>00808 <span class="preprocessor"></span>
<a name="l00821"></a><a class="code" href="group___sprite.html#gbe6706a941e65ac879edb4c0422967bb">00821</a> <span class="preprocessor">#define PA_GetSpriteY(screen, obj) (PA_obj[screen][obj].atr0 &amp; PA_OBJ_Y)</span>
<a name="l00822"></a>00822 <span class="preprocessor"></span>
<a name="l00823"></a>00823 
<a name="l00824"></a>00824 
<a name="l00842"></a><a class="code" href="group___sprite.html#gf8c1762e9ecc2e93bbe6b91648e043a0">00842</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#gf8c1762e9ecc2e93bbe6b91648e043a0">PA_SetSpriteXY</a>(u8 screen, u8 sprite, s16 x, s16 y) {
<a name="l00843"></a>00843        <a class="code" href="group___sprite.html#g4bf93eaa77e6e533cc05f873a35bb95a">PA_SetSpriteX</a>(screen, sprite, x); 
<a name="l00844"></a>00844        <a class="code" href="group___sprite.html#gced1fba7a40575fe1b7794b45255d5e9">PA_SetSpriteY</a>(screen, sprite, y);
<a name="l00845"></a>00845 }
<a name="l00846"></a>00846 
<a name="l00847"></a>00847 
<a name="l00848"></a>00848 
<a name="l00863"></a><a class="code" href="group___sprite.html#g9c4155c5f3cbd7fed697e992766ba8f0">00863</a> <span class="preprocessor">#define PA_SetSpritePal(screen, obj, pal) PA_obj[screen][obj].atr2 = (PA_obj[screen][obj].atr2 &amp; ALL_BUT_PAL) + ((pal) &lt;&lt; 12)</span>
<a name="l00864"></a>00864 <span class="preprocessor"></span>
<a name="l00876"></a><a class="code" href="group___sprite.html#gc9886ffb71301524b7302f6bff6a2435">00876</a> <span class="preprocessor">#define PA_GetSpritePal(screen, obj) (PA_obj[screen][obj].atr2 &gt;&gt; 12)</span>
<a name="l00877"></a>00877 <span class="preprocessor"></span>
<a name="l00878"></a>00878 
<a name="l00893"></a><a class="code" href="group___sprite.html#ge104c411fd7a04ad6265a85d48ddc3a5">00893</a> <span class="preprocessor">#define PA_SetSpriteDblsize(screen, obj, dblsize) PA_obj[screen][obj].atr0 = (PA_obj[screen][obj].atr0 &amp; ALL_BUT(DBLSIZE)) + ((dblsize) &lt;&lt; 9)</span>
<a name="l00894"></a>00894 <span class="preprocessor"></span>
<a name="l00906"></a><a class="code" href="group___sprite.html#gfc0ed987ebc8f23b0f2ae49826f3dab8">00906</a> <span class="preprocessor">#define PA_GetSpriteDblsize(screen, obj) ((PA_obj[screen][obj].atr0 &amp; DBLSIZE) &gt;&gt; 9)</span>
<a name="l00907"></a>00907 <span class="preprocessor"></span>
<a name="l00908"></a>00908 
<a name="l00923"></a><a class="code" href="group___sprite.html#g26e67beb53eebad5aaa121d426a5984d">00923</a> <span class="preprocessor">#define PA_SetSpriteColors(screen, sprite, n_colors) PA_obj[screen][sprite].atr0 = (PA_obj[screen][sprite].atr0 &amp; ALL_BUT(N_COLORS)) + ((n_colors) &lt;&lt; 13)</span>
<a name="l00924"></a>00924 <span class="preprocessor"></span>
<a name="l00936"></a><a class="code" href="group___sprite.html#gd89fdbc2bddda4c51e91e2ba388ce484">00936</a> <span class="preprocessor">#define PA_GetSpriteColors(screen, sprite) ((PA_obj[screen][sprite].atr0 &amp; N_COLORS) &gt;&gt; 13)</span>
<a name="l00937"></a>00937 <span class="preprocessor"></span>
<a name="l00938"></a>00938 
<a name="l00939"></a>00939 
<a name="l00954"></a><a class="code" href="group___sprite.html#g8e36dc74210832c38f6bf6864344f7a6">00954</a> <span class="preprocessor">#define PA_SetSpriteMode(screen, sprite, obj_mode) PA_obj[screen][sprite].atr0 = (PA_obj[screen][sprite].atr0 &amp; ALL_BUT(OBJ_MODE)) + ((obj_mode) &lt;&lt; 10)</span>
<a name="l00955"></a>00955 <span class="preprocessor"></span>
<a name="l00967"></a><a class="code" href="group___sprite.html#g8eade41cc18bc24efbda6a25703cce3d">00967</a> <span class="preprocessor">#define PA_GetSpriteMode(screen, obj) ((PA_obj[screen][obj].atr0 &amp; OBJ_MODE) &gt;&gt; 10)</span>
<a name="l00968"></a>00968 <span class="preprocessor"></span>
<a name="l00969"></a>00969 
<a name="l00984"></a><a class="code" href="group___sprite.html#g1257268cb4fd90c31da4f2eaac4f5540">00984</a> <span class="preprocessor">#define PA_SetSpriteMosaic(screen, obj, mosaic) PA_obj[screen][obj].atr0 = (PA_obj[screen][obj].atr0 &amp; ALL_BUT(OBJ_MOSAIC)) + ((mosaic) &lt;&lt; 12)</span>
<a name="l00985"></a>00985 <span class="preprocessor"></span>
<a name="l00997"></a><a class="code" href="group___sprite.html#gf7007fc7025218586ca19aec5e2dd5b6">00997</a> <span class="preprocessor">#define PA_GetSpriteMosaic(screen, obj) ((PA_obj[screen][obj].atr0 &amp; OBJ_MOSAIC) &gt;&gt; 12)</span>
<a name="l00998"></a>00998 <span class="preprocessor"></span>
<a name="l00999"></a>00999 
<a name="l01000"></a>01000 
<a name="l01015"></a><a class="code" href="group___sprite.html#g641750a4e110a0baf38906fb3082a51d">01015</a> <span class="preprocessor">#define PA_SetSpriteHflip(screen, obj, hflip) PA_obj[screen][obj].atr1 = (PA_obj[screen][obj].atr1 &amp; ALL_BUT(OBJ_HFLIP)) + ((hflip) &lt;&lt; 12)</span>
<a name="l01016"></a>01016 <span class="preprocessor"></span>
<a name="l01028"></a><a class="code" href="group___sprite.html#g953acb0052af2a3ac0f6e375295fdb85">01028</a> <span class="preprocessor">#define PA_GetSpriteHflip(screen, obj) ((PA_obj[screen][obj].atr1 &amp; OBJ_HFLIP) &gt;&gt; 12)</span>
<a name="l01029"></a>01029 <span class="preprocessor"></span>
<a name="l01030"></a>01030 
<a name="l01045"></a><a class="code" href="group___sprite.html#g1613e9822383100508d2e5cbdeb1e774">01045</a> <span class="preprocessor">#define PA_SetSpriteVflip(screen, obj, vflip) PA_obj[screen][obj].atr1 = (PA_obj[screen][obj].atr1 &amp; ALL_BUT(OBJ_VFLIP)) + ((vflip) &lt;&lt; 13)</span>
<a name="l01046"></a>01046 <span class="preprocessor"></span>
<a name="l01058"></a><a class="code" href="group___sprite.html#g3855089c9cf41b39babe471ff20e8a2c">01058</a> <span class="preprocessor">#define PA_GetSpriteVflip(screen, obj) ((PA_obj[screen][obj].atr1 &amp; OBJ_VFLIP) &gt;&gt; 13)</span>
<a name="l01059"></a>01059 <span class="preprocessor"></span>
<a name="l01060"></a>01060 
<a name="l01075"></a><a class="code" href="group___sprite.html#gc0a3dab3f8cd7458a2c6bac496f11457">01075</a> <span class="preprocessor">#define PA_SetSpriteGfx(screen, obj, gfx) PA_obj[screen][obj].atr2 = (PA_obj[screen][obj].atr2 &amp; ALL_BUT(OBJ_GFX)) + ((gfx) &amp; OBJ_GFX)</span>
<a name="l01076"></a>01076 <span class="preprocessor"></span>
<a name="l01088"></a><a class="code" href="group___sprite.html#g3909b4feb83bc29337e3d9ea8999aa5d">01088</a> <span class="preprocessor">#define PA_GetSpriteGfx(screen, obj) (PA_obj[screen][obj].atr2 &amp; OBJ_GFX)</span>
<a name="l01089"></a>01089 <span class="preprocessor"></span>
<a name="l01090"></a>01090 
<a name="l01091"></a>01091 
<a name="l01106"></a><a class="code" href="group___sprite.html#g89eae5f07d1eadd3c14dde5c8fe56a5d">01106</a> <span class="preprocessor">#define PA_SetSpritePrio(screen, obj, prio) PA_obj[screen][obj].atr2 = (PA_obj[screen][obj].atr2 &amp; ALL_BUT(OBJ_PRIO)) + ((prio) &lt;&lt; 10)</span>
<a name="l01107"></a>01107 <span class="preprocessor"></span>
<a name="l01119"></a><a class="code" href="group___sprite.html#ge9f78a08ec4ce948cbf77cdd5486cd29">01119</a> <span class="preprocessor">#define PA_GetSpritePrio(screen, obj) ((PA_obj[screen][obj].atr2 &amp; OBJ_PRIO) &gt;&gt; 10)</span>
<a name="l01120"></a>01120 <span class="preprocessor"></span>
<a name="l01121"></a>01121 
<a name="l01133"></a><a class="code" href="group___sprite.html#g8b3a167e67ef84d36ce6b8a1d100c1ef">01133</a> <span class="preprocessor">#define PA_GetSpriteLx(screen, sprite) PA_size[PA_obj[screen][sprite].atr0 &gt;&gt; 14][PA_obj[screen][sprite].atr1 &gt;&gt; 14].lx</span>
<a name="l01134"></a>01134 <span class="preprocessor"></span>
<a name="l01135"></a>01135 
<a name="l01147"></a><a class="code" href="group___sprite.html#g6eb6db7837dfc5b7c7aefb30e0f4f680">01147</a> <span class="preprocessor">#define PA_GetSpriteLy(screen, sprite)PA_size[PA_obj[screen][sprite].atr0 &gt;&gt; 14][PA_obj[screen][sprite].atr1 &gt;&gt; 14].ly</span>
<a name="l01148"></a>01148 <span class="preprocessor"></span>
<a name="l01149"></a>01149 
<a name="l01164"></a><a class="code" href="group___sprite.html#gbd11e15d7f6a467c62fbd99b3e1376a5">01164</a> <span class="preprocessor">#define PA_CloneSprite(screen, obj, target) {PA_obj[screen][obj].atr0 = PA_obj[screen][target].atr0; PA_obj[screen][obj].atr1 = PA_obj[screen][target].atr1; PA_obj[screen][obj].atr2 = PA_obj[screen][target].atr2; ++obj_per_gfx[screen][PA_GetSpriteGfx(screen, target)];}</span>
<a name="l01165"></a>01165 <span class="preprocessor"></span>
<a name="l01166"></a>01166 
<a name="l01167"></a>01167 
<a name="l01168"></a>01168 
<a name="l01169"></a>01169 
<a name="l01170"></a>01170 
<a name="l01171"></a>01171 
<a name="l01172"></a>01172 
<a name="l01196"></a><a class="code" href="group___sprite.html#g0af73965180c4cf4ce63094f1b3ebfbf">01196</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#g0af73965180c4cf4ce63094f1b3ebfbf">PA_SetSpriteAnimEx</a>(u8 screen, u8 sprite, u8 lx, u8 ly, u8 ncolors, s16 animframe){
<a name="l01197"></a>01197        u16 gfx = <a class="code" href="group___sprite.html#g3909b4feb83bc29337e3d9ea8999aa5d">PA_GetSpriteGfx</a>(screen, sprite);
<a name="l01198"></a>01198        <span class="comment">//PA_OutputText(1, 0, PA_Rand()&amp;15, "%03d - %03d   ", gfx, sprite);</span>
<a name="l01199"></a>01199        <a class="code" href="group___sprite.html#g44454768a7bf46205aef1cfbd340e6af">PA_UpdateGfx</a>(screen, gfx, (<span class="keywordtype">void</span>*)(PA_SpriteAnimP[screen][gfx] + (animframe * (lx * ly) &gt;&gt; (2 - ncolors))));
<a name="l01200"></a>01200 }
<a name="l01201"></a>01201 
<a name="l01216"></a><a class="code" href="group___sprite.html#gcc6a891a7c9870da327c097810a4dbee">01216</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#gcc6a891a7c9870da327c097810a4dbee">PA_SetSpriteAnim</a>(u8 screen, u8 sprite, s16 animframe){
<a name="l01217"></a>01217        <a class="code" href="group___sprite.html#g0af73965180c4cf4ce63094f1b3ebfbf">PA_SetSpriteAnimEx</a>(screen, sprite, <a class="code" href="group___sprite.html#g8b3a167e67ef84d36ce6b8a1d100c1ef">PA_GetSpriteLx</a>(screen, sprite), <a class="code" href="group___sprite.html#g6eb6db7837dfc5b7c7aefb30e0f4f680">PA_GetSpriteLy</a>(screen, sprite), <a class="code" href="group___sprite.html#gd89fdbc2bddda4c51e91e2ba388ce484">PA_GetSpriteColors</a>(screen, sprite), animframe);
<a name="l01218"></a>01218 }
<a name="l01219"></a>01219 
<a name="l01220"></a>01220 
<a name="l01221"></a>01221 
<a name="l01248"></a>01248 <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#gfa1f236952d1e40c23193851c0b46ccd">PA_StartSpriteAnimEx</a>(u8 screen, u8 sprite, s16 firstframe, s16 lastframe, s16 speed, u8 type, s16 ncycles);
<a name="l01249"></a>01249 
<a name="l01250"></a>01250 
<a name="l01251"></a>01251 
<a name="l01252"></a>01252 
<a name="l01273"></a><a class="code" href="group___sprite.html#g8c3dea2736eb6ef26a59927ea6057dba">01273</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#g8c3dea2736eb6ef26a59927ea6057dba">PA_StartSpriteAnim</a>(u8 screen, u8 sprite, s16 firstframe, s16 lastframe, s16 speed){
<a name="l01274"></a>01274        <a class="code" href="group___sprite.html#gfa1f236952d1e40c23193851c0b46ccd">PA_StartSpriteAnimEx</a>(screen, sprite, firstframe, lastframe, speed, ANIM_INFINITE);
<a name="l01275"></a>01275 }
<a name="l01276"></a>01276 
<a name="l01277"></a>01277 
<a name="l01278"></a>01278 
<a name="l01279"></a>01279 
<a name="l01291"></a><a class="code" href="group___sprite.html#gea076b58f79163360abf9684b15838fc">01291</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#gea076b58f79163360abf9684b15838fc">PA_StopSpriteAnim</a>(u8 screen, u8 sprite)
<a name="l01292"></a>01292 {
<a name="l01293"></a>01293        <span class="keywordflow">if</span> (spriteanims[screen][sprite].play) nspriteanims--;
<a name="l01294"></a>01294        spriteanims[screen][sprite].play = 0;
<a name="l01295"></a>01295 }
<a name="l01296"></a>01296 
<a name="l01311"></a><a class="code" href="group___sprite.html#g0a67062587c9df8378c560f0dd14f8fb">01311</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#g0a67062587c9df8378c560f0dd14f8fb">PA_SetSpriteAnimFrame</a>(u8 screen, u8 sprite, u16 frame)
<a name="l01312"></a>01312 {
<a name="l01313"></a>01313        <span class="keywordflow">if</span>(spriteanims[screen][sprite].currentframe != frame){
<a name="l01314"></a>01314               <a class="code" href="group___sprite.html#g0af73965180c4cf4ce63094f1b3ebfbf">PA_SetSpriteAnimEx</a>(screen, sprite, spriteanims[screen][sprite].lx, spriteanims[screen][sprite].ly, spriteanims[screen][sprite].colors, spriteanims[screen][sprite].currentframe);
<a name="l01315"></a>01315               spriteanims[screen][sprite].currentframe = frame;
<a name="l01316"></a>01316        }
<a name="l01317"></a>01317 }
<a name="l01318"></a>01318 
<a name="l01319"></a>01319 
<a name="l01331"></a><a class="code" href="group___sprite.html#g805237160c4eaf60ea333216a022616e">01331</a> <span class="keyword">extern</span> <span class="keyword">inline</span> u16 <a class="code" href="group___sprite.html#g805237160c4eaf60ea333216a022616e">PA_GetSpriteAnimFrame</a>(u8 screen, u8 sprite)
<a name="l01332"></a>01332 {
<a name="l01333"></a>01333        <span class="keywordflow">return</span> spriteanims[screen][sprite].currentframe;
<a name="l01334"></a>01334 }
<a name="l01335"></a>01335 
<a name="l01336"></a>01336 
<a name="l01337"></a>01337 
<a name="l01352"></a><a class="code" href="group___sprite.html#g193fe58a3e0cc0d801f4268ea1aa0ad4">01352</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#g193fe58a3e0cc0d801f4268ea1aa0ad4">PA_SetSpriteAnimSpeed</a>(u8 screen, u8 sprite, s16 speed)
<a name="l01353"></a>01353 {
<a name="l01354"></a>01354        spriteanims[screen][sprite].speed = speed;
<a name="l01355"></a>01355 }
<a name="l01356"></a>01356 
<a name="l01368"></a><a class="code" href="group___sprite.html#g5a7eacf8941fe765c34a4baf30f7f6c5">01368</a> <span class="keyword">extern</span> <span class="keyword">inline</span> u16 <a class="code" href="group___sprite.html#g5a7eacf8941fe765c34a4baf30f7f6c5">PA_GetSpriteAnimSpeed</a>(u8 screen, u8 sprite)
<a name="l01369"></a>01369 {
<a name="l01370"></a>01370        <span class="keywordflow">return</span> spriteanims[screen][sprite].speed;
<a name="l01371"></a>01371 }
<a name="l01372"></a>01372 
<a name="l01373"></a>01373 
<a name="l01388"></a><a class="code" href="group___sprite.html#gedd4dbe32b425e0c1ef0bee1e98cd4fa">01388</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#gedd4dbe32b425e0c1ef0bee1e98cd4fa">PA_SetSpriteNCycles</a>(u8 screen, u8 sprite, s16 NCycles)
<a name="l01389"></a>01389 {
<a name="l01390"></a>01390        spriteanims[screen][sprite].ncycles = NCycles;
<a name="l01391"></a>01391 }
<a name="l01392"></a>01392 
<a name="l01393"></a>01393 
<a name="l01394"></a>01394 
<a name="l01406"></a><a class="code" href="group___sprite.html#g60eda78227b654fcae64a0afcb4ee90d">01406</a> <span class="keyword">extern</span> <span class="keyword">inline</span> u16 <a class="code" href="group___sprite.html#g60eda78227b654fcae64a0afcb4ee90d">PA_GetSpriteNCycles</a>(u8 screen, u8 sprite)
<a name="l01407"></a>01407 {
<a name="l01408"></a>01408        <span class="keywordflow">return</span> spriteanims[screen][sprite].speed;
<a name="l01409"></a>01409 }
<a name="l01410"></a>01410 
<a name="l01411"></a>01411 
<a name="l01412"></a>01412 
<a name="l01413"></a>01413 
<a name="l01414"></a>01414 
<a name="l01429"></a><a class="code" href="group___sprite.html#g1f44ae6197463ff9d1c78772e5c97a9d">01429</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#g1f44ae6197463ff9d1c78772e5c97a9d">PA_SpriteAnimPause</a>(u8 screen, u8 sprite, u8 pause)
<a name="l01430"></a>01430 {
<a name="l01431"></a>01431        <span class="keywordflow">if</span> (pause&amp;&amp;spriteanims[screen][sprite].play) nspriteanims--;
<a name="l01432"></a>01432        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((!pause)&amp;&amp;(!spriteanims[screen][sprite].play)) nspriteanims++;
<a name="l01433"></a>01433        spriteanims[screen][sprite].play = !pause;
<a name="l01434"></a>01434 }
<a name="l01435"></a>01435 
<a name="l01436"></a>01436 
<a name="l01437"></a>01437 
<a name="l01438"></a>01438 
<a name="l01439"></a>01439 
<a name="l01440"></a>01440 
<a name="l01461"></a><a class="code" href="group___sprite.html#g5ba93c853d8d821ef895269a3502f229">01461</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#g5ba93c853d8d821ef895269a3502f229">PA_SetSpritePixel</a>(u8 screen, u8 sprite, u8 x, u8 y, u8 color){
<a name="l01462"></a>01462 u8 hsize = spriteanims[screen][sprite].lx&gt;&gt;3;
<a name="l01463"></a>01463 
<a name="l01464"></a>01464        s32 pos = (x &gt;&gt; 3) + ((y &gt;&gt; 3) * hsize);
<a name="l01465"></a>01465        x&amp;=7; y&amp;=7;
<a name="l01466"></a>01466        
<a name="l01467"></a>01467        pos = (pos &lt;&lt; 5) + (x &gt;&gt; 1) + (y &lt;&lt; 2);
<a name="l01468"></a>01468        
<a name="l01469"></a>01469        u16 pixel = spriteanims[screen][sprite].gfx[pos];
<a name="l01470"></a>01470        
<a name="l01471"></a>01471        <span class="keywordflow">if</span> (x&amp;1){
<a name="l01472"></a>01472               spriteanims[screen][sprite].gfx[pos] = (color &lt;&lt; 8) | (pixel&amp;0x00FF);               
<a name="l01473"></a>01473        }
<a name="l01474"></a>01474        <span class="keywordflow">else</span> {
<a name="l01475"></a>01475               spriteanims[screen][sprite].gfx[pos] = color | (pixel&amp;0xFF00); 
<a name="l01476"></a>01476        }
<a name="l01477"></a>01477 }
<a name="l01478"></a>01478 
<a name="l01479"></a>01479 
<a name="l01497"></a><a class="code" href="group___sprite.html#gad5e8a20aa850a13896740dcd93a5fcc">01497</a> <span class="keyword">extern</span> <span class="keyword">inline</span> u8 <a class="code" href="group___sprite.html#gad5e8a20aa850a13896740dcd93a5fcc">PA_GetSpritePixel</a>(u8 screen, u8 sprite, u8 x, u8 y) {
<a name="l01498"></a>01498 u8 hsize = spriteanims[screen][sprite].lx&gt;&gt;3;
<a name="l01499"></a>01499 
<a name="l01500"></a>01500        s32 pos = (x &gt;&gt; 3) + ((y &gt;&gt; 3) * hsize);
<a name="l01501"></a>01501        x&amp;=7; y&amp;=7;
<a name="l01502"></a>01502        
<a name="l01503"></a>01503        pos = (pos &lt;&lt; 5) + (x &gt;&gt; 1) + (y &lt;&lt; 2);
<a name="l01504"></a>01504        
<a name="l01505"></a>01505        u16 pixel = spriteanims[screen][sprite].gfx[pos];
<a name="l01506"></a>01506        
<a name="l01507"></a>01507        <span class="keywordflow">if</span> (x&amp;1){
<a name="l01508"></a>01508               <span class="keywordflow">return</span> ((pixel&gt;&gt;8)&amp;255);                  
<a name="l01509"></a>01509        }
<a name="l01510"></a>01510        <span class="keywordflow">else</span> {
<a name="l01511"></a>01511               <span class="keywordflow">return</span> (pixel&amp;255);
<a name="l01512"></a>01512        }
<a name="l01513"></a>01513 }
<a name="l01514"></a>01514 
<a name="l01532"></a><a class="code" href="group___sprite.html#gf11d2dd56dad1ad2e8023e79c03efb41">01532</a> <span class="keyword">extern</span> <span class="keyword">inline</span> u8 <a class="code" href="group___sprite.html#gf11d2dd56dad1ad2e8023e79c03efb41">PA_GetSprite16cPixel</a>(u8 screen, u8 sprite, u8 x, u8 y) {
<a name="l01533"></a>01533        u8 hsize = spriteanims[screen][sprite].lx&gt;&gt;3;
<a name="l01534"></a>01534 
<a name="l01535"></a>01535        s32 pos = (x &gt;&gt; 3) + ((y &gt;&gt; 3) * hsize);
<a name="l01536"></a>01536        x&amp;=7; y&amp;=7;
<a name="l01537"></a>01537        
<a name="l01538"></a>01538        pos = (pos &lt;&lt; 4) + (x &gt;&gt; 2) + (y &lt;&lt; 1);
<a name="l01539"></a>01539        
<a name="l01540"></a>01540        u16 pixel = spriteanims[screen][sprite].gfx[pos];
<a name="l01541"></a>01541        <span class="keywordflow">return</span> ((pixel&gt;&gt;(4*(x&amp;3)))&amp;15);    
<a name="l01542"></a>01542 }
<a name="l01543"></a>01543 
<a name="l01544"></a>01544 
<a name="l01545"></a>01545 
<a name="l01557"></a>01557 <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#gcb883c2266c143cded7f6ba59dedc748">PA_InitSpriteDraw</a>(u8 screen, u8 sprite);
<a name="l01558"></a>01558 
<a name="l01559"></a>01559 
<a name="l01560"></a>01560 
<a name="l01566"></a><a class="code" href="group___sprite.html#gf074585d759f2cb59c8113e7fbbea62f">01566</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#gf074585d759f2cb59c8113e7fbbea62f">PA_InitAllSpriteDraw</a>(<span class="keywordtype">void</span>){
<a name="l01567"></a>01567 u8 i, j;
<a name="l01568"></a>01568 <span class="keywordflow">for</span> (j = 0; j &lt; 2; j++)
<a name="l01569"></a>01569        <span class="keywordflow">for</span> (i = 0; i &lt; 128; i++)
<a name="l01570"></a>01570               <a class="code" href="group___sprite.html#gcb883c2266c143cded7f6ba59dedc748">PA_InitSpriteDraw</a>(j, i);
<a name="l01571"></a>01571 }
<a name="l01572"></a>01572 
<a name="l01573"></a>01573 
<a name="l01574"></a>01574 
<a name="l01575"></a>01575 
<a name="l01584"></a>01584 <span class="keywordtype">void</span> <a class="code" href="group___sprite.html#g20c40365581c33a701a95870432f97c7">PA_InitSpriteExtPrio</a>(u8 SpritePrio);
<a name="l01585"></a>01585 
<a name="l01586"></a>01586 <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> PA_SetSpriteExtPrio(u8 screen, u8 sprite, u8 prio){
<a name="l01587"></a>01587        PA_SpritePrio[screen][sprite] = prio;
<a name="l01588"></a>01588 }
<a name="l01589"></a>01589 
<a name="l01590"></a>01590 
<a name="l01591"></a>01591 
<a name="l01592"></a>01592  <span class="comment">// end of Sprite</span>
<a name="l01594"></a>01594 
<a name="l01595"></a>01595 
<a name="l01596"></a>01596 
<a name="l01597"></a>01597 
<a name="l01598"></a>01598 
<a name="l01599"></a>01599 <span class="keywordtype">void</span> PA_UpdateSpriteAnims(<span class="keywordtype">void</span>);
<a name="l01600"></a>01600 
<a name="l01601"></a>01601 
<a name="l01602"></a>01602 
<a name="l01603"></a>01603 
<a name="l01604"></a>01604 
<a name="l01605"></a>01605 
<a name="l01606"></a>01606 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l01607"></a>01607 <span class="preprocessor"></span>}
<a name="l01608"></a>01608 <span class="preprocessor">#endif</span>
<a name="l01609"></a>01609 <span class="preprocessor"></span>
<a name="l01610"></a>01610 
<a name="l01611"></a>01611 
<a name="l01612"></a>01612 
<a name="l01613"></a>01613 <span class="preprocessor">#endif</span>
<a name="l01614"></a>01614 <span class="preprocessor"></span>
<a name="l01615"></a>01615 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Jan 30 23:00:22 2007 for PAlib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1-p1 </small></address>
</body>
</html>
