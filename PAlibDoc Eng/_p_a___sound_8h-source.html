<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>PAlib: PA_Sound.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">Globals</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<h1>PA_Sound.h</h1><a href="_p_a___sound_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="preprocessor">#ifndef _PA_Sound9</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define _PA_Sound9</span>
00003 <span class="preprocessor"></span>
00011 <span class="preprocessor">#include "../Sound9.h"</span>
00012 <span class="preprocessor">#include "<a class="code" href="_p_a___g_b_f_s_8h.html">PA_GBFS.h</a>"</span>
00013 <span class="preprocessor">#include "<a class="code" href="_p_a___f_s_8h.html">PA_FS.h</a>"</span>
00014 <span class="preprocessor">#include &lt;<a class="code" href="_p_a9_8h.html">PA9.h</a>&gt;</span>
00015 
00016        <span class="comment">// 256KB to load MOD files into. Actual size necessary is the size </span>
00017        <span class="comment">// of your largest MOD file (probably less than 256KB).</span>
00018 <span class="preprocessor">#define SND_MEM_POOL_SIZE   256*1024</span>
00019 <span class="preprocessor"></span>
00020 
00021 
00022 <span class="keyword">extern</span> TransferSound snd;
00023 <span class="keyword">extern</span> u32 *sndMemPool;
00024 
00025 <span class="keyword">typedef</span> <span class="keyword">struct</span>{ <span class="comment">// Default sound format</span>
00026        u8 volume;
00027        s16 freq;
00028        s16 format;
00029 } PA_SoundOptions;
00030 
00031 <span class="keyword">extern</span> PA_SoundOptions PA_SoundOption;
00032 
00033 <span class="keyword">extern</span> u8 *FS_mod;
00034 <span class="keyword">extern</span> u8 *FS_wav[16]; <span class="comment">// 16 channels...</span>
00035 
00036 <span class="comment">//plays an 8 bit mono sample at 11025Hz</span>
00037 
00038 
00039 
00040 
00041 
00042 
00063 <span class="keywordtype">void</span> <a class="code" href="group___sound_a_r_m9.html#ga0">PA_SetDefaultSound</a>(u8 volume, s16 freq, s16 format);
00064 
00065 
<a name="l00071"></a><a class="code" href="group___sound_a_r_m9.html#ga1">00071</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sound_a_r_m9.html#ga1">PA_InitSound</a>(<span class="keywordtype">void</span>) {
00072        SndInit9 ();
00073        sndMemPool = (u32*)0x2200000;
00074        SndSetMemPool(sndMemPool, SND_MEM_POOL_SIZE);
00075        <a class="code" href="group___sound_a_r_m9.html#ga0">PA_SetDefaultSound</a>(127, 11025, 1);
00076        FS_mod = (u8*)malloc(2); <span class="comment">// Initialise a small portion of memory, will make it bigger later on...</span>
00077 }
00078 
00079 
00080 
00104 <span class="keywordtype">void</span> <a class="code" href="group___sound_a_r_m9.html#ga2">PA_PlaySoundEx</a>(u8 PA_Channel, <span class="keyword">const</span> <span class="keywordtype">void</span>* data, u32 length, u8 volume, s16 freq, s16 format);
00105 
<a name="l00126"></a><a class="code" href="group___sound_a_r_m9.html#ga3">00126</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sound_a_r_m9.html#ga3">PA_PlayGBFSSoundEx</a>(u8 PA_Channel, u16 FS_wav_number, u8 volume, s16 freq, s16 format){
00127 s32 length = (PA_GBFSfile[FS_wav_number].Length &gt;&gt; 2) + 1; <span class="comment">// Pour etre sur...</span>
00128        free(FS_wav[PA_Channel]);
00129        FS_wav[PA_Channel] = (u8*)malloc(length &lt;&lt; 2);
00130        
00131        DMA_Copy(PA_GBFSfile[FS_wav_number].File, FS_wav[PA_Channel], length, DMA_32NOW);
00132 
00133        <a class="code" href="group___sound_a_r_m9.html#ga2">PA_PlaySoundEx</a>(PA_Channel, (<span class="keywordtype">void</span>*)FS_wav[PA_Channel], length &lt;&lt; 2, volume, freq, format);
00134 }
00135 
00136 
00137 
<a name="l00158"></a><a class="code" href="group___sound_a_r_m9.html#ga4">00158</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sound_a_r_m9.html#ga4">PA_PlayFSSoundEx</a>(u8 PA_Channel, u16 PAFS_wav_number, u8 volume, s16 freq, s16 format){
00159 s32 length = (PA_FSFile[PAFS_wav_number].Length &gt;&gt; 2) + 1; <span class="comment">// Pour etre sur...</span>
00160        free(FS_wav[PA_Channel]);
00161        FS_wav[PA_Channel] = (u8*)malloc(length &lt;&lt; 2);
00162        
00163        DMA_Copy(<a class="code" href="group___p_a_f_s.html#ga4">PA_PAFSFile</a>(PAFS_wav_number), FS_wav[PA_Channel], length, DMA_32NOW);
00164 
00165        <a class="code" href="group___sound_a_r_m9.html#ga2">PA_PlaySoundEx</a>(PA_Channel, (<span class="keywordtype">void</span>*)FS_wav[PA_Channel], length &lt;&lt; 2, volume, freq, format);
00166 }
00167 
00168 
<a name="l00189"></a><a class="code" href="group___sound_a_r_m9.html#ga5">00189</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sound_a_r_m9.html#ga5">PA_PlaySound</a>(u8 PA_Channel, <span class="keyword">const</span> <span class="keywordtype">void</span>* data, u32 length, u8 volume, s16 freq){
00190 <a class="code" href="group___sound_a_r_m9.html#ga2">PA_PlaySoundEx</a>(PA_Channel, data, length, volume, freq, 1);
00191 }
00192 
<a name="l00210"></a><a class="code" href="group___sound_a_r_m9.html#ga6">00210</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sound_a_r_m9.html#ga6">PA_PlayGBFSSound</a>(u8 PA_Channel, u16 FS_wav_number, u8 volume, s16 freq){
00211 s32 length = (PA_GBFSfile[FS_wav_number].Length &gt;&gt; 2) + 1; <span class="comment">// Pour etre sur...</span>
00212        free(FS_wav[PA_Channel]);
00213        FS_wav[PA_Channel] = (u8*)malloc(length &lt;&lt; 2);
00214        
00215        DMA_Copy(PA_GBFSfile[FS_wav_number].File, FS_wav[PA_Channel], length, DMA_32NOW);
00216 
00217        <a class="code" href="group___sound_a_r_m9.html#ga5">PA_PlaySound</a>(PA_Channel, (<span class="keywordtype">void</span>*)FS_wav[PA_Channel], length &lt;&lt; 2, volume, freq);
00218 }
00219 
00220 
00221 
<a name="l00239"></a><a class="code" href="group___sound_a_r_m9.html#ga7">00239</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sound_a_r_m9.html#ga7">PA_PlayFSSound</a>(u8 PA_Channel, u16 PAFS_wav_number, u8 volume, s16 freq){
00240 s32 length = (PA_FSFile[PAFS_wav_number].Length &gt;&gt; 2) + 1; <span class="comment">// Pour etre sur...</span>
00241        free(FS_wav[PA_Channel]);
00242        FS_wav[PA_Channel] = (u8*)malloc(length &lt;&lt; 2);
00243        
00244        DMA_Copy(<a class="code" href="group___p_a_f_s.html#ga4">PA_PAFSFile</a>(PAFS_wav_number), FS_wav[PA_Channel], length, DMA_32NOW);
00245 
00246        <a class="code" href="group___sound_a_r_m9.html#ga5">PA_PlaySound</a>(PA_Channel, (<span class="keywordtype">void</span>*)FS_wav[PA_Channel], length &lt;&lt; 2, volume, freq);
00247 }
00248 
00249 
00250 
<a name="l00263"></a><a class="code" href="group___sound_a_r_m9.html#ga12">00263</a> <span class="preprocessor">#define PA_PlaySimpleSound(PA_Channel, sound) PA_PlaySoundEx(PA_Channel, (void*)sound, (u32)sound##_size, PA_SoundOption.volume, PA_SoundOption.freq, PA_SoundOption.format)</span>
00264 <span class="preprocessor"></span>
00265 
<a name="l00277"></a><a class="code" href="group___sound_a_r_m9.html#ga8">00277</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sound_a_r_m9.html#ga8">PA_PlayGBFSSimpleSound</a>(u8 PA_Channel, u16 FS_wav_number){
00278 s32 length = (PA_GBFSfile[FS_wav_number].Length &gt;&gt; 2) + 1; <span class="comment">// Pour etre sur...</span>
00279        free(FS_wav[PA_Channel]);
00280        FS_wav[PA_Channel] = (u8*)malloc(length &lt;&lt; 2);
00281        
00282        DMA_Copy(PA_GBFSfile[FS_wav_number].File, FS_wav[PA_Channel], length, DMA_32NOW);
00283        
00284        <a class="code" href="group___sound_a_r_m9.html#ga5">PA_PlaySound</a>(PA_Channel, (<span class="keywordtype">void</span>*)FS_wav[PA_Channel], length &lt;&lt; 2, PA_SoundOption.volume, PA_SoundOption.freq);
00285 }
00286 
00287 
00288 
00289 
<a name="l00301"></a><a class="code" href="group___sound_a_r_m9.html#ga9">00301</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sound_a_r_m9.html#ga9">PA_PlayFSSimpleSound</a>(u8 PA_Channel, u16 PAFS_wav_number){
00302 s32 length = (PA_FSFile[PAFS_wav_number].Length &gt;&gt; 2) + 1; <span class="comment">// Pour etre sur...</span>
00303        free(FS_wav[PA_Channel]);
00304        FS_wav[PA_Channel] = (u8*)malloc(length &lt;&lt; 2);
00305        
00306        DMA_Copy(<a class="code" href="group___p_a_f_s.html#ga4">PA_PAFSFile</a>(PAFS_wav_number), FS_wav[PA_Channel], length, DMA_32NOW);
00307        
00308        <a class="code" href="group___sound_a_r_m9.html#ga5">PA_PlaySound</a>(PA_Channel, (<span class="keywordtype">void</span>*)FS_wav[PA_Channel], length &lt;&lt; 2, PA_SoundOption.volume, PA_SoundOption.freq);
00309 }
00310 
00311 
00312 
00313 
00314 
00315 
<a name="l00324"></a><a class="code" href="group___sound_a_r_m9.html#ga13">00324</a> <span class="preprocessor">#define PA_PlayMod(mod_snd) SndPlayMOD((u8*)mod_snd)</span>
00325 <span class="preprocessor"></span>
00326 
<a name="l00335"></a><a class="code" href="group___sound_a_r_m9.html#ga10">00335</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sound_a_r_m9.html#ga10">PA_PlayGBFSMod</a>(u16 FS_mod_number){
00336 s32 length = (PA_GBFSfile[FS_mod_number].Length &gt;&gt; 2) + 1; <span class="comment">// Pour etre sur...</span>
00337        free(FS_mod);
00338        FS_mod = (u8*)malloc(length &lt;&lt; 2);
00339 
00340        DMA_Copy(PA_GBFSfile[FS_mod_number].File, FS_mod, length, DMA_32NOW);
00341 
00342        <a class="code" href="group___sound_a_r_m9.html#ga13">PA_PlayMod</a>(FS_mod);
00343 }
00344 
00345 
<a name="l00354"></a><a class="code" href="group___sound_a_r_m9.html#ga11">00354</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___sound_a_r_m9.html#ga11">PA_PlayFSMod</a>(u16 PAFS_mod_number){
00355 s32 length = (PA_FSFile[PAFS_mod_number].Length &gt;&gt; 2) + 1; <span class="comment">// Pour etre sur...</span>
00356        free(FS_mod);
00357        FS_mod = (u8*)malloc(length &lt;&lt; 2);
00358        u8 *file = (u8*)<a class="code" href="group___p_a_f_s.html#ga4">PA_PAFSFile</a>(PAFS_mod_number);
00359        file = file+4;
00360 
00361        s32 i;
00362        <span class="keywordflow">for</span> (i = 0; i &lt; length&lt;&lt;2; i++) FS_mod[i] = file[i];
00363 
00364        <a class="code" href="group___sound_a_r_m9.html#ga13">PA_PlayMod</a>(FS_mod);
00365 }
00366 
00367 
00368 
00369 
00370 
00371 
00372 
<a name="l00378"></a><a class="code" href="group___sound_a_r_m9.html#ga14">00378</a> <span class="preprocessor">#define PA_StopMod() SndStopMOD()</span>
00379 <span class="preprocessor"></span>
00380 
<a name="l00389"></a><a class="code" href="group___sound_a_r_m9.html#ga15">00389</a> <span class="preprocessor">#define PA_PauseMod(bool) SndPauseMOD(bool)</span>
00390 <span class="preprocessor"></span>
00391  <span class="comment">// end of SoundARM9</span>
00393 
00394 
00395 
00396 
00397 <span class="preprocessor">#endif</span>
00398 <span class="preprocessor"></span>
00399 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Dec 21 17:41:56 2005 for PAlib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
