<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>PAlib: PA_BgLargeMap.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<h1>PA_BgLargeMap.h</h1><a href="_p_a___bg_large_map_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef _PA_BGLARGEMAP</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define _PA_BGLARGEMAP</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 
<a name="l00005"></a>00005 <span class="preprocessor">#include "<a class="code" href="_p_a___bg_tiles_8h.html">PA_BgTiles.h</a>"</span>
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="comment">// Tile engine functions, do not use !</span>
<a name="l00008"></a>00008 <span class="preprocessor">#define PA_TileNumber(x, y) (PA_Modulo((x)+1, 36)+(PA_Modulo((y)+1, 28)*36)) // Used by the tile engine</span>
<a name="l00009"></a>00009 <span class="preprocessor"></span>
<a name="l00010"></a>00010 
<a name="l00011"></a>00011 <span class="preprocessor">#define PA_LoadTileEngine(screen, bg_select, bg_tiles) {\</span>
<a name="l00012"></a>00012 <span class="preprocessor">PA_DeleteBg(screen, bg_select);\</span>
<a name="l00013"></a>00013 <span class="preprocessor">PA_LoadBgTilesEx(screen, bg_select, (void*)Blank, (1008&lt;&lt;5));\</span>
<a name="l00014"></a>00014 <span class="preprocessor">PA_BgInfo[screen][bg_select].Tiles = (void*)bg_tiles;\</span>
<a name="l00015"></a>00015 <span class="preprocessor">PA_LoadBgMap(screen, bg_select, Blank, BG_512X256); \</span>
<a name="l00016"></a>00016 <span class="preprocessor">PA_InitBg(screen, bg_select, BG_512X256, 0, 1);\</span>
<a name="l00017"></a>00017 <span class="preprocessor">PA_BGScrollXY(screen, bg_select, 0, 0);}</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#define INF_JUSTTILE 268435455</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">#define MAX_TILES 1008</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span>
<a name="l00023"></a>00023 <span class="keywordtype">void</span> PA_InfTilesScrollX(u8 screen, u8 bg_select, s32 x);
<a name="l00024"></a>00024 <span class="keywordtype">void</span> PA_InfTilesScrollY(u8 screen, u8 bg_select, s32 y);
<a name="l00025"></a>00025 <span class="keywordtype">void</span> PA_InfLargeScrollXN(u8 screen, u8 bg_select, s32 x);
<a name="l00026"></a>00026 <span class="keywordtype">void</span> PA_InfLargeScrollYN(u8 screen, u8 bg_select, s32 y);
<a name="l00027"></a>00027 <span class="keywordtype">void</span> PA_LargeScrollXN(u8 screen, u8 bg_select, s32 x);
<a name="l00028"></a>00028 <span class="keywordtype">void</span> PA_LargeScrollYN(u8 screen, u8 bg_select, s32 y);
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 
<a name="l00082"></a><a class="code" href="group___bg_large_map.html#g9f6d1aa062e34ce6f00cc597d5e816c6">00082</a> <span class="preprocessor">#define PA_LoadLargeBg(screen, bg_select, bg_tiles, bg_map, color_mode, lx, ly) {\</span>
<a name="l00083"></a>00083 <span class="preprocessor">PA_BgInfo[screen][bg_select].NTiles = SIZEOF_16BIT(bg_tiles)&gt;&gt;5;\</span>
<a name="l00084"></a>00084 <span class="preprocessor">if (PA_BgInfo[screen][bg_select].NTiles &lt; MAX_TILES) {PA_LoadSimpleBg(screen, bg_select, bg_tiles, Blank, BG_512X256, 0, color_mode);}\</span>
<a name="l00085"></a>00085 <span class="preprocessor">else{PA_LoadTileEngine(screen, bg_select, (void*)bg_tiles);}\</span>
<a name="l00086"></a>00086 <span class="preprocessor">PA_InitLargeBg(screen, bg_select, lx, ly, (void*)bg_map);}</span>
<a name="l00087"></a>00087 <span class="preprocessor"></span>
<a name="l00088"></a>00088 
<a name="l00089"></a>00089 
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 
<a name="l00092"></a>00092 
<a name="l00108"></a><a class="code" href="group___bg_large_map.html#g1f23aca5c32f4781bc0f952eae0d609f">00108</a> <span class="preprocessor">#define PA_LoadPAGfxLargeBg(screen, bg_number, bg_name){\</span>
<a name="l00109"></a>00109 <span class="preprocessor">       PA_LoadBgPal(screen, bg_number, (void*)bg_name##_Pal); \</span>
<a name="l00110"></a>00110 <span class="preprocessor">       PA_LoadLargeBg(screen, bg_number, bg_name##_Tiles, bg_name##_Map, 1, (bg_name##_Info[1]) &gt;&gt; 3, (bg_name##_Info[2]) &gt;&gt; 3);}</span>
<a name="l00111"></a>00111 <span class="preprocessor"></span>
<a name="l00112"></a>00112 
<a name="l00113"></a>00113 
<a name="l00144"></a><a class="code" href="group___bg_large_map.html#gdabe8ab915314c5bf00d29d9063eaf37">00144</a> <span class="preprocessor">#define PA_LoadLargeBgEx(screen, bg_select, bg_tiles, tile_size, bg_map, color_mode, lx, ly) {\</span>
<a name="l00145"></a>00145 <span class="preprocessor">PA_BgInfo[screen][bg_select].NTiles = SIZEOF_16BIT(bg_tiles)&gt;&gt;5;\</span>
<a name="l00146"></a>00146 <span class="preprocessor">if (PA_BgInfo[screen][bg_select].NTiles &lt; MAX_TILES) {PA_LoadBg(screen, bg_select, bg_tiles, tile_size, Blank, BG_512X256, 0, color_mode);}\</span>
<a name="l00147"></a>00147 <span class="preprocessor">else{PA_LoadTileEngine(screen, bg_select, bg_tiles);}\</span>
<a name="l00148"></a>00148 <span class="preprocessor">PA_InitLargeBg(screen, bg_select, lx, ly, (void*)bg_map);}</span>
<a name="l00149"></a>00149 <span class="preprocessor"></span>
<a name="l00150"></a>00150 
<a name="l00151"></a>00151 
<a name="l00152"></a>00152 
<a name="l00169"></a><a class="code" href="group___bg_large_map.html#ged6167c4fb05f84311266a14843f2b86">00169</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___bg_large_map.html#ged6167c4fb05f84311266a14843f2b86">PA_InfLargeScrollX</a>(u8 screen, u8 bg_select, s32 x){ <span class="comment">// Autoselect</span>
<a name="l00170"></a>00170        <span class="keywordflow">if</span> (PA_BgInfo[screen][bg_select].NTiles &lt; MAX_TILES) PA_InfLargeScrollXN(screen, bg_select, x);
<a name="l00171"></a>00171        <span class="keywordflow">else</span> PA_InfTilesScrollX(screen, bg_select, x);
<a name="l00172"></a>00172        PA_BgInfo[screen][bg_select].ScrollX = x;
<a name="l00173"></a>00173 }
<a name="l00174"></a>00174 
<a name="l00190"></a><a class="code" href="group___bg_large_map.html#gf457c8312399c7cef3737b2b3547ccd9">00190</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___bg_large_map.html#gf457c8312399c7cef3737b2b3547ccd9">PA_InfLargeScrollY</a>(u8 screen, u8 bg_select, s32 y){ <span class="comment">// Autoselect</span>
<a name="l00191"></a>00191        <span class="keywordflow">if</span> (PA_BgInfo[screen][bg_select].NTiles &lt; MAX_TILES) PA_InfLargeScrollYN(screen, bg_select, y);
<a name="l00192"></a>00192        <span class="keywordflow">else</span> PA_InfTilesScrollY(screen, bg_select, y);
<a name="l00193"></a>00193        PA_BgInfo[screen][bg_select].ScrollY = y;
<a name="l00194"></a>00194 }
<a name="l00195"></a>00195 
<a name="l00196"></a>00196 
<a name="l00215"></a><a class="code" href="group___bg_large_map.html#g77cc7b1da7fafeb4dc64c03753b3f52b">00215</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___bg_large_map.html#g77cc7b1da7fafeb4dc64c03753b3f52b">PA_InfLargeScrollXY</a>(u8 screen, u8 bg_select, s32 x, s32 y){
<a name="l00216"></a>00216        <a class="code" href="group___bg_large_map.html#ged6167c4fb05f84311266a14843f2b86">PA_InfLargeScrollX</a>(screen, bg_select, x);
<a name="l00217"></a>00217        <a class="code" href="group___bg_large_map.html#gf457c8312399c7cef3737b2b3547ccd9">PA_InfLargeScrollY</a>(screen, bg_select, y);
<a name="l00218"></a>00218 }
<a name="l00219"></a>00219 
<a name="l00235"></a><a class="code" href="group___bg_large_map.html#gfc9cfabbb48ba17fce2b9e46658a2b79">00235</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___bg_large_map.html#gfc9cfabbb48ba17fce2b9e46658a2b79">PA_LargeScrollX</a>(u8 screen, u8 bg_select, s32 x){ <span class="comment">// Autoselect</span>
<a name="l00236"></a>00236        <span class="keywordflow">if</span> (PA_BgInfo[screen][bg_select].NTiles &lt; MAX_TILES) {
<a name="l00237"></a>00237               PA_LargeScrollXN(screen, bg_select, x);
<a name="l00238"></a>00238               <span class="keywordflow">if</span> (x &lt; 0) x = 0;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x &gt;= (s32)(PA_BgInfo[screen][bg_select].Infos.Width-256)) x = PA_BgInfo[screen][bg_select].Infos.Width - 257;
<a name="l00239"></a>00239        }
<a name="l00240"></a>00240        <span class="keywordflow">else</span> {
<a name="l00241"></a>00241               PA_InfTilesScrollX(screen, bg_select, x);
<a name="l00242"></a>00242        }      
<a name="l00243"></a>00243        PA_BgInfo[screen][bg_select].ScrollX = x; 
<a name="l00244"></a>00244 }
<a name="l00245"></a>00245 
<a name="l00261"></a><a class="code" href="group___bg_large_map.html#g81fc6dc7f2fcc55d5031f57cfe3c4794">00261</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___bg_large_map.html#g81fc6dc7f2fcc55d5031f57cfe3c4794">PA_LargeScrollY</a>(u8 screen, u8 bg_select, s32 y){ <span class="comment">// Autoselect</span>
<a name="l00262"></a>00262        <span class="keywordflow">if</span> (PA_BgInfo[screen][bg_select].NTiles &lt; MAX_TILES) {
<a name="l00263"></a>00263               PA_LargeScrollYN(screen, bg_select, y);
<a name="l00264"></a>00264               <span class="keywordflow">if</span> (y &lt; 0) y = 0;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (y &gt;= (s32)(PA_BgInfo[screen][bg_select].Infos.Height-192)) y = PA_BgInfo[screen][bg_select].Infos.Height - 193;
<a name="l00265"></a>00265        }
<a name="l00266"></a>00266        <span class="keywordflow">else</span> PA_InfTilesScrollY(screen, bg_select, y);
<a name="l00267"></a>00267        PA_BgInfo[screen][bg_select].ScrollY = y;
<a name="l00268"></a>00268 }
<a name="l00269"></a>00269 
<a name="l00270"></a>00270 
<a name="l00289"></a><a class="code" href="group___bg_large_map.html#g7f50efb09dce7bc3c566bf7cc4fc8707">00289</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___bg_large_map.html#g7f50efb09dce7bc3c566bf7cc4fc8707">PA_LargeScrollXY</a>(u8 screen, u8 bg_select, s32 x, s32 y){
<a name="l00290"></a>00290        <a class="code" href="group___bg_large_map.html#gfc9cfabbb48ba17fce2b9e46658a2b79">PA_LargeScrollX</a>(screen, bg_select, x);
<a name="l00291"></a>00291        <a class="code" href="group___bg_large_map.html#g81fc6dc7f2fcc55d5031f57cfe3c4794">PA_LargeScrollY</a>(screen, bg_select, y);
<a name="l00292"></a>00292 }
<a name="l00293"></a>00293 
<a name="l00294"></a>00294 
<a name="l00295"></a>00295 
<a name="l00317"></a><a class="code" href="group___bg_large_map.html#g3156271b4274fe0c075f8d0c5a2a0fc3">00317</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___bg_large_map.html#g3156271b4274fe0c075f8d0c5a2a0fc3">PA_InitParallaxX</a>(u8 screen, s32 bg0, s32 bg1, s32 bg2, s32 bg3) {
<a name="l00318"></a>00318         PA_parallaxX[screen][0] = bg0;
<a name="l00319"></a>00319         PA_parallaxX[screen][1] = bg1;
<a name="l00320"></a>00320         PA_parallaxX[screen][2] = bg2;
<a name="l00321"></a>00321         PA_parallaxX[screen][3] = bg3;
<a name="l00322"></a>00322 }
<a name="l00323"></a>00323 
<a name="l00345"></a><a class="code" href="group___bg_large_map.html#g5dbd02ea203f5961b80f228d63d0aeed">00345</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___bg_large_map.html#g5dbd02ea203f5961b80f228d63d0aeed">PA_InitParallaxY</a>(u8 screen, s32 bg0, s32 bg1, s32 bg2, s32 bg3) {
<a name="l00346"></a>00346         PA_parallaxY[screen][0] = bg0;
<a name="l00347"></a>00347         PA_parallaxY[screen][1] = bg1;
<a name="l00348"></a>00348         PA_parallaxY[screen][2] = bg2;
<a name="l00349"></a>00349         PA_parallaxY[screen][3] = bg3;
<a name="l00350"></a>00350 }
<a name="l00351"></a>00351 
<a name="l00352"></a>00352 
<a name="l00353"></a>00353 
<a name="l00366"></a><a class="code" href="group___bg_large_map.html#gbcf1d4572e792e5d83a9800109769fa9">00366</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___bg_large_map.html#gbcf1d4572e792e5d83a9800109769fa9">PA_ParallaxScrollX</a>(u8 screen, s32 x){
<a name="l00367"></a>00367 u8 i;
<a name="l00368"></a>00368        <span class="keywordflow">for</span>(i = 0; i &lt; 4; i++) {
<a name="l00369"></a>00369               <span class="keywordflow">if</span> (PA_parallaxX[screen][i])  {
<a name="l00370"></a>00370                      <span class="keywordflow">if</span>(scrollpos[screen][i].infscroll) <a class="code" href="group___bg_tiles.html#gc585010453176e4328998684f8c46541">PA_EasyBgScrollX</a>(screen, i, (PA_parallaxX[screen][i] * x) &gt;&gt; 8); <span class="comment">// Si bg en scrolling infini</span>
<a name="l00371"></a>00371                      <span class="keywordflow">else</span> <a class="code" href="group___bg_tiles.html#gca59b635c345f779f56f0b200ad844b4">PA_BGScrollX</a>(screen, i, (PA_parallaxX[screen][i] * x) &gt;&gt; 8); <span class="comment">// Sinon scrolling normal</span>
<a name="l00372"></a>00372               }
<a name="l00373"></a>00373        }
<a name="l00374"></a>00374 }
<a name="l00375"></a>00375 
<a name="l00376"></a>00376 
<a name="l00389"></a><a class="code" href="group___bg_large_map.html#g7dfb3bb3680980b148f25d15faa77f1f">00389</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___bg_large_map.html#g7dfb3bb3680980b148f25d15faa77f1f">PA_ParallaxScrollY</a>(u8 screen, s32 y){
<a name="l00390"></a>00390 u8 i;
<a name="l00391"></a>00391        <span class="keywordflow">for</span>(i = 0; i &lt; 4; i++) {
<a name="l00392"></a>00392               <span class="keywordflow">if</span> (PA_parallaxY[screen][i])  {
<a name="l00393"></a>00393                      <span class="keywordflow">if</span>(scrollpos[screen][i].infscroll) <a class="code" href="group___bg_tiles.html#gff92e083b8c7532624f1157be1b571e8">PA_EasyBgScrollY</a>(screen, i, (PA_parallaxY[screen][i] * y) &gt;&gt; 8); <span class="comment">// Si bg en scrolling infini</span>
<a name="l00394"></a>00394                      <span class="keywordflow">else</span> <a class="code" href="group___bg_tiles.html#gaa3d04084fd562031b54c5386885e9fb">PA_BGScrollY</a>(screen, i, (PA_parallaxY[screen][i] * y) &gt;&gt; 8); <span class="comment">// Sinon scrolling normal</span>
<a name="l00395"></a>00395               }
<a name="l00396"></a>00396        }
<a name="l00397"></a>00397 }
<a name="l00398"></a>00398 
<a name="l00399"></a>00399 
<a name="l00415"></a><a class="code" href="group___bg_large_map.html#gfcf8b75a3daf1634b38cb51ae8274f5b">00415</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___bg_large_map.html#gfcf8b75a3daf1634b38cb51ae8274f5b">PA_ParallaxScrollXY</a>(u8 screen, s32 x, s32 y){
<a name="l00416"></a>00416        <a class="code" href="group___bg_large_map.html#gbcf1d4572e792e5d83a9800109769fa9">PA_ParallaxScrollX</a>(screen, x);
<a name="l00417"></a>00417        <a class="code" href="group___bg_large_map.html#g7dfb3bb3680980b148f25d15faa77f1f">PA_ParallaxScrollY</a>(screen, y);
<a name="l00418"></a>00418 }
<a name="l00419"></a>00419 
<a name="l00420"></a>00420  <span class="comment">// end of BgLargeMap</span>
<a name="l00422"></a>00422 
<a name="l00423"></a>00423 
<a name="l00424"></a>00424 
<a name="l00425"></a>00425 <span class="comment">// Pas utilisé en direct par le programmaeur</span>
<a name="l00426"></a>00426 <span class="keywordtype">void</span> PA_InitLargeBg(u8 screen, u8 bg_select, s32 lx, s32 ly, <span class="keywordtype">void</span>* bg_map);
<a name="l00427"></a>00427 
<a name="l00428"></a>00428 
<a name="l00429"></a>00429 
<a name="l00430"></a>00430 <span class="preprocessor">#endif</span>
<a name="l00431"></a>00431 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Jan 30 23:00:22 2007 for PAlib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1-p1 </small></address>
</body>
</html>
