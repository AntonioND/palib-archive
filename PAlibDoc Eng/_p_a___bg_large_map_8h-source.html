<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>PAlib: PA_BgLargeMap.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">Globals</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<h1>PA_BgLargeMap.h</h1><a href="_p_a___bg_large_map_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="preprocessor">#ifndef _PA_BGLARGEMAP</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define _PA_BGLARGEMAP</span>
00003 <span class="preprocessor"></span>
00004 
00005 <span class="preprocessor">#include "<a class="code" href="_p_a___bg_tiles_8h.html">PA_BgTiles.h</a>"</span>
00006 
00007 <span class="comment">// Tile engine functions, do not use !</span>
00008 <span class="preprocessor">#define PA_TileNumber(x, y) (PA_Modulo((x)+1, 36)+(PA_Modulo((y)+1, 28)*36)) // Used by the tile engine</span>
00009 <span class="preprocessor"></span>
00010 
00011 <span class="preprocessor">#define PA_LoadTileEngine(screen, bg_select, bg_tiles) {\</span>
00012 <span class="preprocessor">PA_DeleteBg(screen, bg_select);\</span>
00013 <span class="preprocessor">PA_LoadBgTilesEx(screen, bg_select, (void*)Blank, (1008&lt;&lt;5));\</span>
00014 <span class="preprocessor">PA_BgInfo[screen][bg_select].Tiles = (void*)bg_tiles;\</span>
00015 <span class="preprocessor">PA_LoadBgMap(screen, bg_select, Blank, BG_512X256); \</span>
00016 <span class="preprocessor">PA_InitBg(screen, bg_select, BG_512X256, 0, 1);\</span>
00017 <span class="preprocessor">PA_BGScrollXY(screen, bg_select, 0, 0);}</span>
00018 <span class="preprocessor"></span>
00019 
00020 <span class="preprocessor">#define INF_JUSTTILE 268435455</span>
00021 <span class="preprocessor"></span><span class="preprocessor">#define MAX_TILES 1008</span>
00022 <span class="preprocessor"></span>
00023 <span class="keywordtype">void</span> PA_InfTilesScrollX(u8 screen, u8 bg_select, s32 x);
00024 <span class="keywordtype">void</span> PA_InfTilesScrollY(u8 screen, u8 bg_select, s32 y);
00025 <span class="keywordtype">void</span> PA_InfLargeScrollXN(u8 screen, u8 bg_select, s32 x);
00026 <span class="keywordtype">void</span> PA_InfLargeScrollYN(u8 screen, u8 bg_select, s32 y);
00027 <span class="keywordtype">void</span> PA_LargeScrollXN(u8 screen, u8 bg_select, s32 x);
00028 <span class="keywordtype">void</span> PA_LargeScrollYN(u8 screen, u8 bg_select, s32 y);
00029 
00030 
00031 
00032 
<a name="l00082"></a><a class="code" href="group___bg_large_map.html#ga11">00082</a> <span class="preprocessor">#define PA_LoadLargeBg(screen, bg_select, bg_tiles, bg_map, color_mode, lx, ly) {\</span>
00083 <span class="preprocessor">PA_BgInfo[screen][bg_select].NTiles = SIZEOF_16BIT(bg_tiles)&gt;&gt;5;\</span>
00084 <span class="preprocessor">if (PA_BgInfo[screen][bg_select].NTiles &lt; MAX_TILES) {PA_LoadSimpleBg(screen, bg_select, bg_tiles, Blank, BG_512X256, 0, color_mode);}\</span>
00085 <span class="preprocessor">else{PA_LoadTileEngine(screen, bg_select, (void*)bg_tiles);}\</span>
00086 <span class="preprocessor">PA_InitLargeBg(screen, bg_select, lx, ly, (void*)bg_map);}</span>
00087 <span class="preprocessor"></span>
00088 
00089 
00090 
00091 
00092 
<a name="l00108"></a><a class="code" href="group___bg_large_map.html#ga12">00108</a> <span class="preprocessor">#define PA_LoadPAGfxLargeBg(screen, bg_number, bg_name){\</span>
00109 <span class="preprocessor">       PA_LoadBgPal(screen, bg_number, (void*)bg_name##_Pal); \</span>
00110 <span class="preprocessor">       PA_LoadLargeBg(screen, bg_number, bg_name##_Tiles, bg_name##_Map, 1, (bg_name##_Info[1]) &gt;&gt; 3, (bg_name##_Info[2]) &gt;&gt; 3);}</span>
00111 <span class="preprocessor"></span>
00112 
00113 
<a name="l00144"></a><a class="code" href="group___bg_large_map.html#ga13">00144</a> <span class="preprocessor">#define PA_LoadLargeBgEx(screen, bg_select, bg_tiles, tile_size, bg_map, color_mode, lx, ly) {\</span>
00145 <span class="preprocessor">PA_BgInfo[screen][bg_select].NTiles = SIZEOF_16BIT(bg_tiles)&gt;&gt;5;\</span>
00146 <span class="preprocessor">if (PA_BgInfo[screen][bg_select].NTiles &lt; MAX_TILES) {PA_LoadBg(screen, bg_select, bg_tiles, tile_size, Blank, BG_512X256, 0, color_mode);}\</span>
00147 <span class="preprocessor">else{PA_LoadTileEngine(screen, bg_select, bg_tiles);}\</span>
00148 <span class="preprocessor">PA_InitLargeBg(screen, bg_select, lx, ly, (void*)bg_map);}</span>
00149 <span class="preprocessor"></span>
00150 
00151 
00152 
<a name="l00169"></a><a class="code" href="group___bg_large_map.html#ga0">00169</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___bg_large_map.html#ga0">PA_InfLargeScrollX</a>(u8 screen, u8 bg_select, s32 x){ <span class="comment">// Autoselect</span>
00170        <span class="keywordflow">if</span> (PA_BgInfo[screen][bg_select].NTiles &lt; MAX_TILES) PA_InfLargeScrollXN(screen, bg_select, x);
00171        <span class="keywordflow">else</span> PA_InfTilesScrollX(screen, bg_select, x);
00172        PA_BgInfo[screen][bg_select].ScrollX = x;
00173 }
00174 
<a name="l00190"></a><a class="code" href="group___bg_large_map.html#ga1">00190</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___bg_large_map.html#ga1">PA_InfLargeScrollY</a>(u8 screen, u8 bg_select, s32 y){ <span class="comment">// Autoselect</span>
00191        <span class="keywordflow">if</span> (PA_BgInfo[screen][bg_select].NTiles &lt; MAX_TILES) PA_InfLargeScrollYN(screen, bg_select, y);
00192        <span class="keywordflow">else</span> PA_InfTilesScrollY(screen, bg_select, y);
00193        PA_BgInfo[screen][bg_select].ScrollY = y;
00194 }
00195 
00196 
<a name="l00215"></a><a class="code" href="group___bg_large_map.html#ga2">00215</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___bg_large_map.html#ga2">PA_InfLargeScrollXY</a>(u8 screen, u8 bg_select, s32 x, s32 y){
00216        <a class="code" href="group___bg_large_map.html#ga0">PA_InfLargeScrollX</a>(screen, bg_select, x);
00217        <a class="code" href="group___bg_large_map.html#ga1">PA_InfLargeScrollY</a>(screen, bg_select, y);
00218 }
00219 
<a name="l00235"></a><a class="code" href="group___bg_large_map.html#ga3">00235</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___bg_large_map.html#ga3">PA_LargeScrollX</a>(u8 screen, u8 bg_select, s32 x){ <span class="comment">// Autoselect</span>
00236        <span class="keywordflow">if</span> (PA_BgInfo[screen][bg_select].NTiles &lt; MAX_TILES) {
00237               PA_LargeScrollXN(screen, bg_select, x);
00238               <span class="keywordflow">if</span> (x &lt; 0) x = 0;   else if (x &gt;= (s32)(PA_BgInfo[screen][bg_select].Infos.Width-256)) x = PA_BgInfo[screen][bg_select].Infos.Width - 257;
00239        }
00240        <span class="keywordflow">else</span> {
00241               PA_InfTilesScrollX(screen, bg_select, x);
00242        }      
00243        PA_BgInfo[screen][bg_select].ScrollX = x; 
00244 }
00245 
<a name="l00261"></a><a class="code" href="group___bg_large_map.html#ga4">00261</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___bg_large_map.html#ga4">PA_LargeScrollY</a>(u8 screen, u8 bg_select, s32 y){ <span class="comment">// Autoselect</span>
00262        <span class="keywordflow">if</span> (PA_BgInfo[screen][bg_select].NTiles &lt; MAX_TILES) {
00263               PA_LargeScrollYN(screen, bg_select, y);
00264               <span class="keywordflow">if</span> (y &lt; 0) y = 0;   else if (y &gt;= (s32)(PA_BgInfo[screen][bg_select].Infos.Height-192)) y = PA_BgInfo[screen][bg_select].Infos.Height - 193;
00265        }
00266        <span class="keywordflow">else</span> PA_InfTilesScrollY(screen, bg_select, y);
00267        PA_BgInfo[screen][bg_select].ScrollY = y;
00268 }
00269 
00270 
<a name="l00289"></a><a class="code" href="group___bg_large_map.html#ga5">00289</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___bg_large_map.html#ga5">PA_LargeScrollXY</a>(u8 screen, u8 bg_select, s32 x, s32 y){
00290        <a class="code" href="group___bg_large_map.html#ga3">PA_LargeScrollX</a>(screen, bg_select, x);
00291        <a class="code" href="group___bg_large_map.html#ga4">PA_LargeScrollY</a>(screen, bg_select, y);
00292 }
00293 
00294 
00295 
<a name="l00317"></a><a class="code" href="group___bg_large_map.html#ga6">00317</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___bg_large_map.html#ga6">PA_InitParallaxX</a>(u8 screen, s32 bg0, s32 bg1, s32 bg2, s32 bg3) {
00318         PA_parallaxX[screen][0] = bg0;
00319         PA_parallaxX[screen][1] = bg1;
00320         PA_parallaxX[screen][2] = bg2;
00321         PA_parallaxX[screen][3] = bg3;
00322 }
00323 
<a name="l00345"></a><a class="code" href="group___bg_large_map.html#ga7">00345</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___bg_large_map.html#ga7">PA_InitParallaxY</a>(u8 screen, s32 bg0, s32 bg1, s32 bg2, s32 bg3) {
00346         PA_parallaxY[screen][0] = bg0;
00347         PA_parallaxY[screen][1] = bg1;
00348         PA_parallaxY[screen][2] = bg2;
00349         PA_parallaxY[screen][3] = bg3;
00350 }
00351 
00352 
00353 
<a name="l00366"></a><a class="code" href="group___bg_large_map.html#ga8">00366</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___bg_large_map.html#ga8">PA_ParallaxScrollX</a>(u8 screen, s32 x){
00367 u8 i;
00368        <span class="keywordflow">for</span>(i = 0; i &lt; 4; i++) {
00369               <span class="keywordflow">if</span> (PA_parallaxX[screen][i])  {
00370                      <span class="keywordflow">if</span>(scrollpos[screen][i].infscroll) <a class="code" href="group___bg_tiles.html#ga18">PA_EasyBgScrollX</a>(screen, i, (PA_parallaxX[screen][i] * x) &gt;&gt; 8); <span class="comment">// Si bg en scrolling infini</span>
00371                      <span class="keywordflow">else</span> <a class="code" href="group___bg_tiles.html#ga8">PA_BGScrollX</a>(screen, i, (PA_parallaxX[screen][i] * x) &gt;&gt; 8); <span class="comment">// Sinon scrolling normal</span>
00372               }
00373        }
00374 }
00375 
00376 
<a name="l00389"></a><a class="code" href="group___bg_large_map.html#ga9">00389</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___bg_large_map.html#ga9">PA_ParallaxScrollY</a>(u8 screen, s32 y){
00390 u8 i;
00391        <span class="keywordflow">for</span>(i = 0; i &lt; 4; i++) {
00392               <span class="keywordflow">if</span> (PA_parallaxY[screen][i])  {
00393                      <span class="keywordflow">if</span>(scrollpos[screen][i].infscroll) <a class="code" href="group___bg_tiles.html#ga19">PA_EasyBgScrollY</a>(screen, i, (PA_parallaxY[screen][i] * y) &gt;&gt; 8); <span class="comment">// Si bg en scrolling infini</span>
00394                      <span class="keywordflow">else</span> <a class="code" href="group___bg_tiles.html#ga9">PA_BGScrollY</a>(screen, i, (PA_parallaxY[screen][i] * y) &gt;&gt; 8); <span class="comment">// Sinon scrolling normal</span>
00395               }
00396        }
00397 }
00398 
00399 
<a name="l00415"></a><a class="code" href="group___bg_large_map.html#ga10">00415</a> <span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___bg_large_map.html#ga10">PA_ParallaxScrollXY</a>(u8 screen, s32 x, s32 y){
00416        <a class="code" href="group___bg_large_map.html#ga8">PA_ParallaxScrollX</a>(screen, x);
00417        <a class="code" href="group___bg_large_map.html#ga9">PA_ParallaxScrollY</a>(screen, y);
00418 }
00419 
00420  <span class="comment">// end of BgLargeMap</span>
00422 
00423 
00424 
00425 <span class="comment">// Pas utilisé en direct par le programmaeur</span>
00426 <span class="keywordtype">void</span> PA_InitLargeBg(u8 screen, u8 bg_select, s32 lx, s32 ly, <span class="keywordtype">void</span>* bg_map);
00427 
00428 
00429 
00430 <span class="preprocessor">#endif</span>
00431 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Fri Oct 6 17:35:23 2006 for PAlib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
